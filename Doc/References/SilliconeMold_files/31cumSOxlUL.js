(function(l){var q=window.AmazonUIPageJS||window.P,r=q._namespace||q.attributeErrors,h=r?r("DetailPageTwisterViewAsset",""):q;h.guardFatal?h.guardFatal(l)(h,window):h.execute(function(){l(h,window)})})(function(l,q,r){l.when("A","dp-refresh-handler","view-util","twister-string-constants").register("page-refresh-view",function(h,E,n,d){var p=h.$;return function(v,m,r){function y(b){return{chunk:function(c){var b=c.ASIN,f=c.Value;c=c.FeatureName;if("twister-slot-price_feature_div"==c){var f=f?f.content:
null,a=p(".swatchSelect .twisterSwatchPrice").html(),e=p(".swatchSelect .price_slot_ppu").html();a&&f&&f.priceToSet&&(a=h.trim(a),f.priceToSet!==a&&(p(".swatchSelect .twisterSwatchPrice").html(f.priceToSet),t("twisterUpdatePriceMismatch")));e&&f&&f.hasPricePerUnit&&f.pricePerUnitDisplay&&(e=h.trim(e),f.pricePerUnitDisplay!==e&&(p(".swatchSelect .price_slot_ppu").html(f.pricePerUnitDisplay),t("twisterUpdatePricePerUnitMismatch")))}g.twisterRefreshHandler.stampFeature(c,b)},success:function(c,b,f){t("twisterUpdateSuccess")},
error:function(c,b,f){Twister.$("#variations-overlay").hide();t("twisterUpdateFailure");Twister.showErrorMessageOnFailure&&(alert(Twister.errorMessageOnFailure),location.reload())},abort:function(c){z.logFatal("Ajax aborted: "+c)},timeout:4E4}}function A(b,c,k,f,a){var e=[];"parent"===b?(c=w(c,f,"parent",a),e.parent=c,c=w(k,f,"partial",a),e.partial=c):(c=w(k,f,b,a),e[b]=c);return e}function x(b,c,k,f,a){for(var e in b)if(b.hasOwnProperty(e)){if("full"===e){var p=k.dimensionType,d=g.twisterUtil.getDimensionInfo().length,
n=k.dimensionDisplayType,m=k.newAsin,l=a&&(h.state("dp-twister-csm")||{}).updateCSMPageTypeId;g.twisterRefreshHandler.startMeasurement(m,p,d,n,l?m:void 0,l?["is-twister","parentAsin-"+B]:void 0)}p=b[e].twisterRefreshParams;d=b[e].notifyClientParams;a&&(g.twisterRefreshHandler.fadeInFeatures(g.config[e].affectedFeatures),g.twisterRefreshHandler.doPageRefresh(p,c,f));F(d.asin,d.id,e,a)}}function G(){p.each(m.contextMetaData,function(b,c){var k={};c=c.elementList||[];var f=c.length,a=[];k.click={};k.mouseOver=
{};for(var e=0;e<f;e++){var d=p("#"+c[e].divToUpdate);a.push(c[e].divToUpdate);d.length&&c[e].customClientFunction&&(c[e].updateOnHover&&(k.mouseOver[c[e].divToUpdate]=d.attr("customfunctionname")),k.click[c[e].divToUpdate]=d.attr("customfunctionname"))}g.config[b].affectedFeatures=a;g.config[b].clientFeatures=k})}function F(b,c,k,f){var a="",a=f?d.EVENT_TYPE_CLICK:d.EVENT_TYPE_MOUSEOVER;p.each(g.config[k].clientFeatures[a],function(a,f){try{var k=function(){g.twisterRefreshHandler.stampImageLoad(b)};
(function(){var a={};a.P=l;(function(){eval("var P \x3d this.P;");eval("0, "+f)(c,DetailPage.StateController,k)}).call(a)})()}catch(d){z.logFatal("Client feature - "+a+", threw and exception :- "+d)}})}function w(b,c,k,f){var a={},e={},d={};f="parent"===k?b:"partial"===f?c:b;a.isFlushing=2;a.dpEnvironment=Twister.dpEnvironment;l.now("abPricingFfqp_utils","abPricingFfqp_quantityManager").execute("setQuantityForTwister",function(c,b){void 0!==c&&void 0!==b&&(a.qty=b.singleton.getCurrentQuantity())});
a.asinList=b;a.id=f;a.mType=k;H();a=I(k,a);(k=J())&&(e.isTryState=k);e.triggerEvent=g.twisterFeatureName;e=g.twisterRefreshHandler.createCustomParamsMap(a,e);d.asin=b;d.id=c;return{twisterRefreshParams:e,notifyClientParams:d}}function J(){var b=!1,c=h.state("pwState");c&&(b=c.isTryState);return b}function H(){var b=[];p.each(["full","parent","partial","master"],function(c,k){p.each(m.contextMetaData[k].mTypeSpecificURLParams,function(c,a){b.push(c)})});g.twisterRefreshHandler.removeParams(b)}function I(b,
c){p.each(m.contextMetaData[b].mTypeSpecificURLParams,function(b,f){c[b]=f});return c}function K(b){b=g.twisterUtil.getSelectionInfoFromSelectedVariationValuesMap(b.selected_variation_values);g.twisterUtil.isFullySelected(b)?g.currentPageSelectionState="full":g.currentPageSelectionState="partial"}function L(b){var c={};c.config=b.measurement;c.dimensionDisplayType=b.dimensionsDisplayType;c.storeID=b.storeID;c.productGroupID=b.productGroupID;c.triggerEvent="Twister";return c}function C(b,c){var d;
"partial"===b&&"partial"===c&&(d="partial");"partial"===b&&"full"===c&&(d="full");"full"===b&&"partial"===c&&(d="parent");"full"===b&&"full"===c&&(d="full");return d}var g=this,B=m.parent_asin,u=q.ue,D="",z=new r("dpTwisterPageRefreshView");this.twisterUtil=v.util;this.twisterFeatureName="Twister";this.currentPageSelectionState;this.twisterRefreshHandler;this.config={partial:{},full:{},parent:{},master:{}};this.hiddenFeatures={intermediateEOS:1,EOS:1};g.viewUtil=new n(v);g.subType;var t=function(b){u&&
u.count&&u.count(b,(u.count(b)||0)+1)};(function(){K(m);G();var b={featureName:g.twisterFeatureName},c=L(m);g.twisterRefreshHandler=new E(b,c,null);v.registerPassive({viewAttribution:"DetailPage",viewName:"WebTwisterRefreshView"},{updateView:function(c,b){var a={};if(c!==d.METADATA){var a={},e;e=void 0;if(b)switch(c){case d.VARIATION_CHANGE:e=b.selected().selInfo;break;case d.VARIATION_PEEK:e=b.peek().selInfo}a.selectionInfo=e;a.dimensionCombination=g.viewUtil.getCurrDimCombId(a.selectionInfo,"_",
"X");e=g.twisterUtil.isFullySelected(a.dimensionCombination);a.childAsin=g.twisterUtil.getAsinFromSelectionInfo(a.selectionInfo,e);a.newPageSelectionState=e?"full":"partial";a.mTypeForRefresh=C(g.currentPageSelectionState,a.newPageSelectionState);a.newAsin="parent"===a.mTypeForRefresh?B:a.childAsin;a.doNotAbort="parent"===a.mTypeForRefresh?!0:!1;a.twisterCallListParams=A(a.mTypeForRefresh,a.newAsin,a.childAsin,a.dimensionCombination,a.newPageSelectionState);a.optionsForTwisterRefresh=y(b);a.pageRefreshMeasure=
{newAsin:a.newAsin,dimensionType:D,dimensionDisplayType:m.dimensionsDisplayType}}switch(c){case d.VARIATION_CHANGE:g.subType!==d.PRODUCTIZED_VIEW_SUBTYPE&&(x(a.twisterCallListParams,a.optionsForTwisterRefresh,a.pageRefreshMeasure,a.doNotAbort,!0),g.currentPageSelectionState=a.newPageSelectionState,g.subType=void 0);break;case d.VARIATION_PEEK:x(a.twisterCallListParams,a.optionsForTwisterRefresh,a.pageRefreshMeasure,a.doNotAbort,!1);break;case d.METADATA:switch(b.subType){case d.DP_STATE_VIEW_SUBTYPE:D=
b.divMetadata.dimDisplayType;break;case d.PRODUCTIZED_VIEW_SUBTYPE:g.subType=b.subType,a.dimensionCombination=b.newDimCombID,a.childAsin=b.childAsin,a.newAsin=b.newAsin,a.newPageSelectionState=g.twisterUtil.isFullySelected(a.dimensionCombination)?"full":"partial",a.mTypeForRefresh=C(g.currentPageSelectionState,a.newPageSelectionState),a.doNotAbort="parent"===a.mTypeForRefresh?!0:!1,a.twisterCallListParams=A(a.mTypeForRefresh,a.newAsin,a.childAsin,a.dimensionCombination,a.newPageSelectionState),a.optionsForTwisterRefresh=
y(b),a.pageRefreshMeasure={newAsin:a.newAsin,dimensionType:b.divMetaData?b.divMetaData.dimDisplayType:void 0,dimensionDisplayType:m.dimensionsDisplayType},x(a.twisterCallListParams,a.optionsForTwisterRefresh,a.pageRefreshMeasure,a.doNotAbort,!0),g.currentPageSelectionState=a.newPageSelectionState}}}})})()}});l.when("A").register("twister-common-constants",function(h){return{FAMILY_SIZE_BUCKET_LIMITS:[0,3,8,25,50,100,1E3,5E3],DEFAULT_SELECTION_TAG:"defaultSelection",BottomSheet:{TRIGGERING_CRITERION_BOTTOMSHEET_OPEN:"onBottomsheetOpen",
BOTTOM_SHEET_SELECTOR:"#twister_bottom_sheet",OVERFLOW_THRESHOLD:8,BOTTOM_SHEET_INIT_TIME:"dpBottomSheetInitTime",PREFETCH_AJAX_CALLS_COMPLETED_EVENT:"prefetchAjaxCallsCompleted"},SortingFiltering:{PRICE_SORT_TOGGLE_SWITCH_CLICK_ON_METRIC:"DPBottomSheetSortingToggleSwitchClickOn",PRICE_SORT_TOGGLE_SWITCH_CLICK_OFF_METRIC:"DPBottomSheetSortingToggleSwitchClickOff",PRICE_SORT_TOGGLE_SWITCH_ENABLED_STATUS_METRIC:"DPBottomSheetPriceSortingToggleSwitchEnabledStatus",PRIME_FILTER_TOGGLE_SWITCH_CLICK_ON_METRIC:"DPBottomSheetPrimeFilteringToggleSwitchClickOn",
PRIME_FILTER_TOGGLE_SWITCH_CLICK_OFF_METRIC:"DPBottomSheetPrimeFilteringToggleSwitchClickOff",PRIME_FILTER_TOGGLE_SWITCH_ENABLED_STATUS_METRIC:"DPBottomSheetPrimeFilteringToggleSwitchEnabledStatus",SORTING_TYPE_PRICE:"price",SORTING_TYPE_UNSORTED:"unsorted",PREFETCH_AJAX_CALLS_COMPLETED_EVENT:"prefetchAjaxCallsCompleted",TOGGLE_SWITCH_STATE_OFF:"off",TOGGLE_SWITCH_STATE_ON:"on",PRICE_SORTING_ENABLED_PARAMETER:"priceSortingEnabled",PRICE_SORTING_PRIORITY_NAME_PARAMETER:"priceSortingPriorityName",ALTER_TYPE_NAME_PRICE:"price",
ALTER_TYPE_NAME_PRIME:"prime",ALTER_SUB_TYPE_ENABLE:"enable",ALTER_SUB_TYPE_DISABLE:"disable",ALTER_TYPE_SORT:"sort",ALTER_TYPE_FILTER:"filter",PRICE_SORT_TOGGLE_SWITCH_SELECTOR:".priceSortToggleSwitch",PRIME_FILTER_TOGGLE_SWITCH_SELECTOR:".primeFilterToggleSwitch",EXPERIMENT_PRICE_SORTING:"priceSorting",EXPERIMENT_PRIME_FILTERING:"primeFiltering",ATTRIBUTE_PRICE_SORTING_PRIORITY:"priorityName",ATTRIBUTE_SORT_BY_PRICE_STRING:"sortByPriceString",ATTRIBUTE_SORTED_BY_PRICE_STRING:"sortedByPriceString",
ATTRIBUTE_TOOL_NAME:"toolName",TOOL_TYPE_TOGGLE_SWITCH:"toggleSwitch"}}});"use strict";l.when("A","twister-util","ready").execute(function(h,l){var n=q.ue;if(void 0!==h.state("dimensionKeyList"))for(var d in h.state("dimensionKeyList").dimensionKeys)void 0!==d&&(h.on("a:popover:beforeShow:mobile-twister_"+d,function(d){void 0===h.state("twisterInteractability")&&n&&"function"===typeof n.count&&n.count("Twister:blankTwisterSecView",(n.count("Twister:blankTwisterSecView")||0)+1)}),h.on("a:popover:beforeHide:mobile-twister_"+
d,function(d){if(d&&d.popover){d=d.popover.getContent();var h=0<d.find(".aw-twister-row:first").length;d&&!h&&n&&"function"===typeof n.count&&n.count("blankTwisterSecondaryView",(n.count("blankTwisterSecondaryView")||0)+1)}}))});"use strict";l.when("A").register("twister-bottom-sheet-container",function(h){return{getInstance:function(){return this.sheetViewInstance},saveInstance:function(l){this.sheetViewInstance=l;h.trigger("dp:sheet:twister:initialized")}}});"use strict";l.when("A","a-sheet","jQuery",
"ready").execute(function(h,l,n){h.on("a:sheet:afterShow:bottom_sheet_mediaMatrix",function(){var d=n("#mediaMatrix_bottomSheet_view_div").find("#format-picker-scroller"),h=d.find("#selected-format"),l=h.offset().left,m=Math.abs(h.width()),h=Math.max(document.documentElement.clientWidth,q.innerWidth||0),m=h-m,r=d.scrollLeft();(l>m||0>=l)&&d.scrollLeft(r+l-h/3)})})});