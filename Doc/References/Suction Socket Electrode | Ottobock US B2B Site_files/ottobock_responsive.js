
if(!String.prototype.includes){String.prototype.includes=function(search,start){'use strict';if(typeof start!=='number'){start=0;}
if(start+search.length>this.length){return false;}else{return this.indexOf(search,start)!==-1;}};};

function disableFormAfterFirstSubmit(form){form.unbind('submit.firstTime');form.bind('submit.consecutive',function(event){event.preventDefault();return;});showBusy();}
function disableLinkAfterFirstClick(link){link.click(function(e){e.preventDefault();return;});if(!link.classList.contains("orderentrytotals-show-discounts")){showBusy();}}
function disableElementAfterFirstClick(el){switch(el.prop('tagName').toLowerCase()){case'button':disableButtonAfterFirstClick(el);break;case'input':disableButtonAfterFirstClick(el);break;case'a':disableLinkAfterFirstClick(el);break;default:preventEventAfterFirstClick(el);}}
function showBusy(){if($('body').children('.isloading-overlay').length<1){$.isLoading({class:"fa fa-spinner fa-spin fa-3x fa-fw"});}}
function showCallInPopup($el){$.colorbox({href:"#contactInfoList .contact",inline:true,height:300,width:400,close:'<span class="glyphicon glyphicon-remove"></span>',onComplete:function(){$.colorbox.resize({height:$('#cboxLoadedContent .content').outerHeight(true)});}});}
(function(){var $syncForms=$('#placeOrderForm1, #placeOrderForm2, body.page-login #loginForm, #popUpForm, #selectionCriteriaForm');$syncForms.bind('submit.firstTime',function(){disableFormAfterFirstSubmit($(this));});var $syncLinks=$('table.salesDocListTable, .documentFlow, .page-ottobock-select-account .login-panel').find('a').add('table.orderListTable a:not(.tracking-info-link)');$syncLinks.click(function(){disableElementAfterFirstClick($(this));});var callInButtons='form.add_to_cart_form button.addToCartButton.callIn, a.callIn, #globalMessages .callIn';$(document).on('click',callInButtons,function(){$(callInButtons).removeAttr('disabled').removeProp('disabled');showCallInPopup($(callInButtons));});var selAddressButtons='#summaryDeliveryAddressOverlay .useAddress';$(document).on('click',selAddressButtons,function(){showBusy();});var addToCartButton='.js-add-to-cart';$(document).on('click',addToCartButton,function(){showBusy();});var openCartLink='a.mini-cart-link';$(document).on('click',openCartLink,function(){showBusy();});var nextCheckoutStepButton='button.checkout-next, a.checkout-next';$(document).on('click',nextCheckoutStepButton,function(){showBusy();});function disableButtonAfterFirstClick(button){button.click(function(e){e.preventDefault();return;});showBusy();}
function hideBusy(){$.isLoading("hide");}
if($('.item__configuration-toggle').length!=0){$(document).on("click",'.item__configuration-toggle',function(event){$(this).toggleClass('open');$("#configuration-details-"+$(this).data('config-item-id')).toggleClass('open');});}
$('body.page-cartPage').find('.checkoutButton').click(showBusy);})();

function enableCallIn(el){if(el.hasAttr('disabled')){el.removeAttr('disabled');}
if(el.hasProp('disabled')){el.removeProp('disabled');}
el.click(function(){$(this).colorbox({href:"#contactInfoList .contact",inline:true,close:'<span class="glyphicon glyphicon-remove"></span>',});});}
$.fn.hasAttr=function(name){var attr=$(this).attr('name');if(typeof attr!==typeof undefined&&attr!==false){return true;}
return false;};$.fn.hasProp=function(name){var prop=$(this).prop('name');if(typeof prop!==typeof undefined&&prop!==false){return true;}
return false;};(function(){var elements=$('.callIn');elements.each(function(){enableCallIn($(this));});})();

function submitChat(){$('#urlId').val(window.location.href);$('#chatForm').submit();}
var ciscoBubbleChat=(function(){$("#chatLink").on("click",function(){ciscoBubbleChat.showChatWindow();});var smHost='webchat.ottobockus.com';var widgetId='8';var msgMustAcceptCert='Certificate must be accepted to start the conversation.';var msgAcceptCertButtonLabel='Accept Certificate';var msgCloseButtonLabel='Close';var msgWaitingCertAcceptance='Waiting for certificate acceptance.';var msgConnectivityIssues='We are experiencing connectivity issues. Try later.';var appId='cisco_bubble_chat';var appMargin=15;var appUrl='https://'+smHost+'/ccp/ui/BubbleChat.html?host='+smHost+'&wid='+widgetId;var connectivityCheckUrl='https://'+smHost+'/ccp/ui/ConnectivityCheck.html';var messageEventListener;var addNoCacheQueryParam;return{showChatWindow:function(injectedData){var logPrefix='CISCO_BUBBLE_CHAT: ';if(document.getElementById(appId)){console.log(logPrefix+'Not loading BubbleChat as it is already loaded');return;}
var validateInjectedData=function(formData){var result=true;if(formData&&typeof formData==='object'&&formData.constructor===Object){var counter=0;for(var key in formData){if(!(typeof formData[key]==='string'||formData[key]instanceof String)){result=false;break;}
counter++;if(counter>10){result=false;break;}}}else{result=false;}
return result;};if(injectedData){if(validateInjectedData(injectedData.formData)){appUrl+='&injectedFormData='+encodeURIComponent(JSON.stringify(injectedData.formData));}else{if(typeof injectedData.validationErrorCallback==='function'){injectedData.validationErrorCallback();}else{console.log(logPrefix+'Could not invoke validationErrorCallback as it is not a function');}}}
var iframe=document.createElement('iframe');iframe.setAttribute('sandbox','allow-scripts allow-same-origin allow-forms allow-popups');iframe.setAttribute('id',appId);iframe.setAttribute('style','position: fixed; width: 312px; height: 410px; border: none; bottom: 0px; right: 50%; z-index:10001; margin-right: -156px;');$.isLoading("show");document.body.appendChild(iframe);var frameWindow=iframe.contentWindow?iframe.contentWindow:iframe;var frameDoc=frameWindow.document;frameDoc.open();frameDoc.close();frameDoc.body.innerHTML='<div id="secure-connectivity-check-container" style="position: fixed; width: 300px; height: 395px; '+'bottom: 10px; right: 10px; font-family: Helvetica; font-size: 14px; color: #4F5051;'+'box-shadow: 0 0 3px #000; background: #fff; display: flex; flex-direction: column; display: none;">'+'<div style="height: 25%;"></div>'+'<div style="height: 25%; display: flex; align-items: flex-start; justify-content: center; text-align: center;">'+'<div style="padding: 0 15% 0 15%;">'+'<div id="secure-connectivity-check-msg"></div>'+'<a id="accept-cert-button" style="display:none; padding-top: 10px" href="#" onclick="acceptCertificate(); return void(0);">'+
msgAcceptCertButtonLabel+'</a>'+'</div>'+'</div>'+'<div style="height: 25%; display: flex; align-items: flex-end; justify-content: center; text-align: center;">'+'<div style="padding: 0 15% 0 15%;">'+'<a href="#" onclick="window.parent.postMessage({messageType: \'unmount\'}, \'*\'); return void(0);">'+
msgCloseButtonLabel+'</a>'+'</div>'+'</div>'+'<div style="height: 25%;"></div>'+'</div>';frameWindow.acceptCertificate=function(){frameDoc.getElementById('secure-connectivity-check-msg').innerHTML=msgWaitingCertAcceptance;frameDoc.getElementById('accept-cert-button').style.display='none';window.open(addNoCacheQueryParam(connectivityCheckUrl),'SM_CERT_PAGE');};if(!addNoCacheQueryParam){addNoCacheQueryParam=function(url){return url+(url.indexOf("?")===-1?'?':'&')+'nocache='+new Date().getTime();}}
if(!messageEventListener){messageEventListener=function(event){console.log(logPrefix+'Received event from origin: '+event.origin);console.log(logPrefix+'Received event data: '+JSON.stringify(event.data));switch(event.data.messageType){case'resize':document.getElementById(appId).style.height=event.data.height+appMargin+'px';console.log(logPrefix+'Successfully resized');break;case'unmount':document.body.removeChild(document.getElementById(appId));window.removeEventListener('message',messageEventListener);$.isLoading("hide");console.log(logPrefix+'Successfully unmounted BubbleChat and removed event listener for message');break;case'bubblechat-cert-accepted':document.getElementById(appId).setAttribute('src',addNoCacheQueryParam(appUrl));console.log(logPrefix+'Successfully validated certificate acceptance and loaded BubbleChat');break;default:console.log(logPrefix+'Unknown message type');}};}
window.addEventListener('message',messageEventListener);console.log(logPrefix+'Event listener for message added');var showConnectivityIssue=function(message,showAcceptCertLink){window.postMessage({messageType:'resize',height:395},'*');frameDoc.getElementById('secure-connectivity-check-container').style.display='block';frameDoc.getElementById('secure-connectivity-check-msg').innerHTML=message;frameDoc.getElementById('accept-cert-button').style.display=showAcceptCertLink?'block':'none';};var xhr=new XMLHttpRequest();xhr.onreadystatechange=function(){if(this.readyState===4){console.log(logPrefix+'Connectivity check status: '+this.status);switch(this.status){case 200:iframe.setAttribute('src',addNoCacheQueryParam(appUrl));break;case 0:showConnectivityIssue(msgMustAcceptCert,true);break;default:showConnectivityIssue(msgConnectivityIssues,false);}}};console.log(logPrefix+'Checking connectivity to: '+connectivityCheckUrl);xhr.open('GET',addNoCacheQueryParam(connectivityCheckUrl),true);xhr.send();}};})();

(function(){var dynamicSavedCartsConfirmationFormID="";if($('.js-delete-saved-cart-item').length!=0){$(document).on("click",'.js-delete-saved-cart-item',function(event){event.preventDefault();var cartItemId=$(this).data('savedcartitem-id');$(".item__list--item[data-itemid='"+cartItemId+"']").remove();});}
if($('#saveCartName').length!=0){$('#saveCartSelectedCart').change(function(){if($('#saveCartSelectedCart').val()!="0"){ACC.savedcarts.disableSaveCartButton(false);$('.saveCart-hide-if-selected').hide();$.colorbox.resize();}else{if(!$('#saveCartName').val()){ACC.savedcarts.disableSaveCartButton(true);}
$('.saveCart-hide-if-selected').show();$.colorbox.resize();}});}
if($('.js-item__list__cart-container').length!=0){$(document).on("click",'.item__list--add-item:last input',function(event){var id=$('.js-item__list__cart-container li.item__list--add-item').length;var liClone=$('.js-item__list__cart-container li.item__list--add-item:last').clone();$('.js-item__list__cart-container').append(liClone);$(".item__list--add-item:last input").each(function(){$(this).attr('name',$(this).data('name')+"["+id+"]");});});}
if($('.js-confirm-popup-item-link').length!=0){$(document).on("click",'.js-confirm-popup-item-link',function(event){event.preventDefault();var popuptext=$(this).data('popup-text');var confirmation_link=$(this).data('popup-link');var confirmation_form=$(this).data('popup-form-id');var popupTitle=$(this).data('popup-title');var popupTitleHtml=ACC.common.encodeHtml(popupTitle);$('#generic_popup_confirm_savedcart_text').text(popuptext);if(confirmation_link!=undefined){$('#generic_popup_confirm_savedcart_method_get').show();$('#generic_popup_confirm_savedcart_method_post').hide();$('#savedcart_confirm_link').attr('href',confirmation_link);}else{$('#generic_popup_confirm_savedcart_method_get').hide();$('#generic_popup_confirm_savedcart_method_post').show();dynamicSavedCartsConfirmationFormID=confirmation_form;}
ACC.colorbox.open(popupTitleHtml,{inline:true,className:"js-savedcart_confirm_modal",href:"#generic_popup_confirm_savedcart",width:'500px',onComplete:function(){$(this).colorbox.resize();}});});}
$(document).on("click",'#savedcart_confirm_post_btn',function(event){$('#'+dynamicSavedCartsConfirmationFormID).submit();});})();

var owl=$('#main_slider');owl.owlCarousel({navSpeed:500,slideSpeed:400,paginationSpeed:1000,singleItem:true,autoPlay:true,nav:true,navigation:true,loop:true,dots:true,autoplayHoverPause:true,navigationText:["<span class=\"glyphicon glyphicon-chevron-left\"></span>","<span class=\"glyphicon glyphicon-chevron-right\"></span>"],afterAction:callback,});function callback(event){var current=this.currentItem;$(".media-container").each(function(){if($(this).data('page')==current){var img=$(this).find("img");var styles={top:"-15px","box-shadow":"0px -3px 10px -4px rgba(0, 0, 0, 0.5)"};img.css(styles);}else{var img=$(this).find("img");var styles={top:"","box-shadow":""};img.css(styles);}});}
$(".media-container").each(function(){$(this).mouseover(function(){$('#main_slider').trigger('owl.goTo',$(this).data('page'));});});
