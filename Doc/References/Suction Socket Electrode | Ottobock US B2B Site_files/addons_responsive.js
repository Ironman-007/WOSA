
!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),o=function(){function t(){}return t.getWebappScriptElementFromDocument=function(e){if(e.currentScript){if(!(e.currentScript instanceof HTMLScriptElement))throw new Error("getWebappScriptElementFromDocument() found non htlm script element");return e.currentScript}var n=e.querySelector("script#"+t.webappScriptId);if(n)return n;var r=e.querySelectorAll("script[src*="+t.webappScriptName+"]");if(1!==r.length)throw new Error("SmartEdit unable to load - invalid "+t.webappScriptName+" script tag");return r.item(0)},t.extractQueryParameter=function(t,e){var n={};return t.replace(/([?&])([^&=]+)=([^&]*)?/g,function(t,e,r,o){return n[r]=o,""}),n[e]},t.injectJS=function(e,n){void 0===n&&(n=0),e.length&&n<e.length&&t.getScriptJs()(e[n],function(){t.injectJS(e,n+1)})},t.injectCSS=function(e,n,r){if(void 0===r&&(r=0),n&&0!==n.length){var o=document.createElement("link");o.rel="stylesheet",o.href=n[r],e.appendChild(o),r+1<n.length&&t.injectCSS(e,n,r+1)}},t.getScriptJs=function(){return r},t.webappScriptId="smartedit-injector",t.webappScriptName="webApplicationInjector",t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(3),a=n(4),i="smartEditBootstrap",c=r.default.getWebappScriptElementFromDocument(document);if(!c)throw new Error("Unable to location webappInjector script");var u=o.default.getWhitelistFromScriptElement(c,window),s=o.default.convertWhitelistingToRegexp(u);parent.postMessage({pk:Math.random(),gatewayId:i,eventId:"loading",data:{location:document.location.href}},"*"),window.addEventListener("load",function(){parent.postMessage({pk:Math.random(),gatewayId:i,eventId:"bootstrapSmartEdit",data:{location:document.location.href}},"*")}),window.addEventListener("message",function(t){var he=(t.data.gatewayId==='smartEditBootstrap'&&t.data.eventId==='bundle');if(!he)return;if(!o.default.isAllowed(t.origin,window,s))throw new Error(t.origin+" is not allowed to override this storefront.");var e=t.data;if(e.gatewayId===i&&"bundle"===e.eventId){window.smartedit=window.smartedit||{},parent.postMessage({gatewayId:i,eventId:"promiseAcknowledgement",data:{pk:e.pk}},"*");var n=e.data.resources;if(n){if(n.properties)for(var a in n.properties)n.properties.hasOwnProperty(a)&&(window.smartedit[a]=n.properties[a]);var c=document.getElementsByTagName("head")[0];if(n.js&&n.js.length>0){var u=void 0;u="string"==typeof n.js[0]?n.js:n.js.filter(function(t){return!t.namespaceToCheck||!window[t.namespaceToCheck]}).map(function(t){return t.src}),r.default.injectJS(u)}n.css&&n.css.length>0&&r.default.injectCSS(c,n.css)}parent.postMessage({gatewayId:i,eventId:"promiseReturn",data:{pk:e.pk,type:"success"}},"*")}},!1),window.onbeforeunload=function(){parent.postMessage({pk:Math.random(),gatewayId:i,eventId:"unloading",data:{location:document.location.href}},"*")},a.Heartbeat.startSendingHeartBeatToIframe(c)},function(t,e,n){var r,o,a;a=function(){var t,e,n=document,r=n.getElementsByTagName("head")[0],o=!1,a="push",i="readyState",c="onreadystatechange",u={},s={},l={},d={};function p(t,e){for(var n=0,r=t.length;n<r;++n)if(!e(t[n]))return o;return 1}function f(t,e){p(t,function(t){return e(t),1})}function m(e,n,r){e=e[a]?e:[e];var o=n&&n.call,i=o?n:r,c=o?e.join(""):n,h=e.length;function w(t){return t.call?t():u[t]}function v(){if(!--h)for(var t in u[c]=1,i&&i(),l)p(t.split("|"),w)&&!f(l[t],w)&&(l[t]=[])}return setTimeout(function(){f(e,function e(n,r){return null===n?v():(r||/^https?:\/\//.test(n)||!t||(n=-1===n.indexOf(".js")?t+n+".js":t+n),d[n]?(c&&(s[c]=1),2==d[n]?v():setTimeout(function(){e(n,!0)},0)):(d[n]=1,c&&(s[c]=1),void g(n,v)))})},0),m}function g(t,o){var a,u=n.createElement("script");u.onload=u.onerror=u[c]=function(){u[i]&&!/^c|loade/.test(u[i])||a||(u.onload=u[c]=null,a=1,d[t]=2,o())},u.async=1,u.src=e?t+(-1===t.indexOf("?")?"?":"&")+e:t,r.insertBefore(u,r.lastChild)}return m.get=g,m.order=function(t,e,n){!function r(o){o=t.shift(),t.length?m(o,r):m(o,e,n)}()},m.path=function(e){t=e},m.urlArgs=function(t){e=t},m.ready=function(t,e,n){t=t[a]?t:[t];var r,o=[];return!f(t,function(t){u[t]||o[a](t)})&&p(t,function(t){return u[t]})?e():(r=t.join("|"),l[r]=l[r]||[],l[r][a](e),n&&n(o)),m},m.done=function(t){m([null],t)},m},t.exports?t.exports=a():void 0===(o="function"==typeof(r=a)?r.call(e,n,e,t):r)||(t.exports=o)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=function(){function t(){}return t.convertWhitelistingToRegexp=function(e){return(e=e||[]).map(function(e){var n=e.trim();if(t.whitelistingConfigRegex.test(n)){var r=["^","$"].join(n.replace(/\./g,"\\.").replace(/\*/g,"[-a-zA-Z0-9]*"));return new RegExp(r)}throw new Error(t.whitelistingErrorMsg)})},t.getWhitelistFromScriptElement=function(e,n){var o=[t.getSanitizedHostFromLocation(n.location)],a=e.getAttribute(t.allowOriginAttributeName)||"";a&&(o=o.concat(a.split(",")));var i="",c=n.document.createElement("a");c.href=e.src;var u=r.default.extractQueryParameter(c.search,t.allowOriginQueryParamName);return u&&(i=decodeURI(u))&&i.split(",").forEach(function(t){return o.push(t)}),o},t.isAllowed=function(e,n,r){if(!/^(https?:)\/\/([-.a-zA-Z0-9]+(:[0-9]{1,5})?)$/.test(e))return!1;var o=n.document.createElement("a");return o.href=e,("https:"!==n.location.protocol||"https:"===o.protocol)&&r.some(function(e){return e.lastIndex=0,e.test(t.getSanitizedHostFromLocation(o))})},t.getSanitizedHostFromLocation=function(t){var e=t.port||("https"===t.protocol.replace(/:/g,"")?"443":"80");return t.hostname+":"+e},t.whitelistingConfigRegex=new RegExp(/^(([-*a-zA-Z0-9]+[.])*([-a-zA-Z0-9]+[.]))?[-a-zA-Z0-9]+(:[0-9]{1,5})$/),t.allowOriginAttributeName="data-smartedit-allow-origin",t.allowOriginQueryParamName="allow-origin",t.whitelistingErrorMsg="\n\t\tAllowed whitelist characters are a-z, A-Z, 0-9, -, period, or *\n\t\tThe wildcard * can be used to represent a prefixed domain, Good example: *.domain.com:80\n\t\tbut not a suffix or port, Bad examples: subdomain.*.com subdomain.domain.com:*.\n\t\tEvery whitelisting must contain a specific port.\n\t",t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.startSendingHeartBeatToIframe=function(e){var n=t.getHeartBeatInterval(e);parent.postMessage({pk:Math.random(),gatewayId:"heartBeatGateway",eventId:"heartBeat",data:{location:document.location.href}},"*"),setTimeout(function(){return t.startSendingHeartBeatToIframe(e)},n)},t.getHeartBeatInterval=function(e){return parseInt(e.getAttribute("data-smartedit-heart-beat-interval")||t.DEFAULT_HEARTBEAT_INTERVAL,10)},t.DEFAULT_HEARTBEAT_INTERVAL="500",t}();e.Heartbeat=r}]);

(function(){window.smartedit=window.smartedit||{};var onReprocessListeners=[];window.smartedit.reprocessPage=function(){onReprocessListeners.forEach(function(callbackFn){try{callbackFn();}
catch(e){}});};window.smartedit.addOnReprocessPageListener=function(callbackFn){if(!_isFunction(callbackFn)){throw new Error('SmartEditAddon - Cannot register page reprocessing listener. Provided callback must be a function.');}
onReprocessListeners.push(callbackFn);};function _isFunction(obj){return(obj&&typeof obj==='function');}})();

(function(){Imager.prototype.replaceImagesBasedOnScreenDimensions=function(image){var availableWidths=[],srcARRAY,cwidth;if($(image).attr("data-media")!==undefined){var eMedia=$(image).attr("data-media");$(image).removeAttr("data-media");eMedia=$.parseJSON(eMedia);$.each(eMedia,function(key,value){availableWidths.push(parseInt(key));});$(image).data("width",availableWidths);$(image).data("media",eMedia);}
srcARRAY=$(image).data("media");cwidth=Imager.getClosestValue(window.innerWidth,$.extend([],$(image).data("width")));if(!srcARRAY[cwidth]||image.src==srcARRAY[cwidth]){return;}
image.src=srcARRAY[cwidth];};window.smartedit.addOnReprocessPageListener(function(){ACC.global.initImager();ACC.global.reprocessImages();if($(".navigation--top .myAccountLinksHeader").length===0){$('.js-myAccount-root').empty();$(".js-secondaryNavAccount > ul").empty();ACC.navigation.myAccountNavigation();}
ACC.carousel.bindCarousel();ACC.autocomplete.bindSearchAutocomplete();});})();
;
;

!function(o){"function"==typeof define&&define.amd?define(["jquery"],o):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),o(n),n}:o(jQuery)}(function(j){"use strict";var D=0;j.fn.TouchSpin=function(y){var k={min:0,max:100,initval:"",replacementval:"",step:1,decimals:0,stepinterval:100,forcestepdivisibility:"round",stepintervaldelay:500,verticalbuttons:!1,verticalup:"+",verticaldown:"-",verticalupclass:"",verticaldownclass:"",prefix:"",postfix:"",prefix_extraclass:"",postfix_extraclass:"",booster:!0,boostat:10,maxboostedstep:!1,mousewheel:!0,buttondown_class:"btn btn-primary",buttonup_class:"btn btn-primary",buttondown_txt:"-",buttonup_txt:"+",callback_before_calculation:function(t){return t},callback_after_calculation:function(t){return t}},C={min:"min",max:"max",initval:"init-val",replacementval:"replacement-val",step:"step",decimals:"decimals",stepinterval:"step-interval",verticalbuttons:"vertical-buttons",verticalupclass:"vertical-up-class",verticaldownclass:"vertical-down-class",forcestepdivisibility:"force-step-divisibility",stepintervaldelay:"step-interval-delay",prefix:"prefix",postfix:"postfix",prefix_extraclass:"prefix-extra-class",postfix_extraclass:"postfix-extra-class",booster:"booster",boostat:"boostat",maxboostedstep:"max-boosted-step",mousewheel:"mouse-wheel",buttondown_class:"button-down-class",buttonup_class:"button-up-class",buttondown_txt:"button-down-txt",buttonup_txt:"button-up-txt"};return this.each(function(){var i,p,a,u,o,s,t,n,e,r,c=j(this),l=c.data(),d=0,f=!1;function b(){""===i.prefix&&(p=o.prefix.detach()),""===i.postfix&&(a=o.postfix.detach())}function h(){var t,n,o;""!==(t=i.callback_before_calculation(c.val()))?0<i.decimals&&"."===t||(n=parseFloat(t),isNaN(n)&&(n=""!==i.replacementval?i.replacementval:0),(o=n).toString()!==t&&(o=n),null!==i.min&&n<i.min&&(o=i.min),null!==i.max&&n>i.max&&(o=i.max),o=function(t){switch(i.forcestepdivisibility){case"round":return(Math.round(t/i.step)*i.step).toFixed(i.decimals);case"floor":return(Math.floor(t/i.step)*i.step).toFixed(i.decimals);case"ceil":return(Math.ceil(t/i.step)*i.step).toFixed(i.decimals);default:return t}}(o),Number(t).toString()!==o.toString()&&(c.val(o),c.trigger("change"))):""!==i.replacementval&&(c.val(i.replacementval),c.trigger("change"))}function v(){if(i.booster){var t=Math.pow(2,Math.floor(d/i.boostat))*i.step;return i.maxboostedstep&&t>i.maxboostedstep&&(t=i.maxboostedstep,s=Math.round(s/t)*t),Math.max(i.step,t)}return i.step}function x(){h(),s=parseFloat(i.callback_before_calculation(o.input.val())),isNaN(s)&&(s=0);var t=s,n=v();s+=n,null!==i.max&&s>i.max&&(s=i.max,c.trigger("touchspin.on.max"),_()),o.input.val(i.callback_after_calculation(Number(s).toFixed(i.decimals))),t!==s&&c.trigger("change")}function g(){h(),s=parseFloat(i.callback_before_calculation(o.input.val())),isNaN(s)&&(s=0);var t=s,n=v();s-=n,null!==i.min&&s<i.min&&(s=i.min,c.trigger("touchspin.on.min"),_()),o.input.val(i.callback_after_calculation(Number(s).toFixed(i.decimals))),t!==s&&c.trigger("change")}function m(){_(),d=0,f="down",c.trigger("touchspin.on.startspin"),c.trigger("touchspin.on.startdownspin"),e=setTimeout(function(){t=setInterval(function(){d++,g()},i.stepinterval)},i.stepintervaldelay)}function w(){_(),d=0,f="up",c.trigger("touchspin.on.startspin"),c.trigger("touchspin.on.startupspin"),r=setTimeout(function(){n=setInterval(function(){d++,x()},i.stepinterval)},i.stepintervaldelay)}function _(){switch(clearTimeout(e),clearTimeout(r),clearInterval(t),clearInterval(n),f){case"up":c.trigger("touchspin.on.stopupspin"),c.trigger("touchspin.on.stopspin");break;case"down":c.trigger("touchspin.on.stopdownspin"),c.trigger("touchspin.on.stopspin")}d=0,f=!1}!function(){if(c.data("alreadyinitialized"))return;if(c.data("alreadyinitialized",!0),D+=1,c.data("spinnerid",D),!c.is("input"))return console.log("Must be an input.");i=j.extend({},k,l,(s={},j.each(C,function(t,n){var o="bts-"+n;c.is("[data-"+o+"]")&&(s[t]=c.data(o))}),s),y),""!==i.initval&&""===c.val()&&c.val(i.initval),h(),function(){var t=c.val(),n=c.parent();""!==t&&(t=i.callback_after_calculation(Number(t).toFixed(i.decimals)));c.data("initvalue",t).val(t),c.addClass("form-control"),n.hasClass("input-group")?function(t){t.addClass("bootstrap-touchspin");var n,o,s=c.prev(),p=c.next(),a='<span class="input-group-addon input-group-prepend bootstrap-touchspin-prefix input-group-prepend bootstrap-touchspin-injected"><span class="input-group-text">'+i.prefix+"</span></span>",e='<span class="input-group-addon input-group-append bootstrap-touchspin-postfix input-group-append bootstrap-touchspin-injected"><span class="input-group-text">'+i.postfix+"</span></span>";s.hasClass("input-group-btn")||s.hasClass("input-group-prepend")?(n='<button class="'+i.buttondown_class+' bootstrap-touchspin-down bootstrap-touchspin-injected" type="button">'+i.buttondown_txt+"</button>",s.append(n)):(n='<span class="input-group-btn input-group-prepend bootstrap-touchspin-injected"><button class="'+i.buttondown_class+' bootstrap-touchspin-down" type="button">'+i.buttondown_txt+"</button></span>",j(n).insertBefore(c));p.hasClass("input-group-btn")||p.hasClass("input-group-append")?(o='<button class="'+i.buttonup_class+' bootstrap-touchspin-up bootstrap-touchspin-injected" type="button">'+i.buttonup_txt+"</button>",p.prepend(o)):(o='<span class="input-group-btn input-group-append bootstrap-touchspin-injected"><button class="'+i.buttonup_class+' bootstrap-touchspin-up" type="button">'+i.buttonup_txt+"</button></span>",j(o).insertAfter(c));j(a).insertBefore(c),j(e).insertAfter(c),u=t}(n):function(){var t,n="";c.hasClass("input-sm")&&(n="input-group-sm");c.hasClass("input-lg")&&(n="input-group-lg");t=i.verticalbuttons?'<div class="input-group '+n+' bootstrap-touchspin bootstrap-touchspin-injected"><span class="input-group-addon input-group-prepend bootstrap-touchspin-prefix"><span class="input-group-text">'+i.prefix+'</span></span><span class="input-group-addon bootstrap-touchspin-postfix input-group-append"><span class="input-group-text">'+i.postfix+'</span></span><span class="input-group-btn-vertical"><button class="'+i.buttondown_class+" bootstrap-touchspin-up "+i.verticalupclass+'" type="button">'+i.verticalup+'</button><button class="'+i.buttonup_class+" bootstrap-touchspin-down "+i.verticaldownclass+'" type="button">'+i.verticaldown+"</button></span></div>":'<div class="input-group bootstrap-touchspin bootstrap-touchspin-injected"><span class="input-group-btn input-group-prepend"><button class="'+i.buttondown_class+' bootstrap-touchspin-down" type="button">'+i.buttondown_txt+'</button></span><span class="input-group-addon bootstrap-touchspin-prefix input-group-prepend"><span class="input-group-text">'+i.prefix+'</span></span><span class="input-group-addon bootstrap-touchspin-postfix input-group-append"><span class="input-group-text">'+i.postfix+'</span></span><span class="input-group-btn input-group-append"><button class="'+i.buttonup_class+' bootstrap-touchspin-up" type="button">'+i.buttonup_txt+"</button></span></div>";u=j(t).insertBefore(c),j(".bootstrap-touchspin-prefix",u).after(c),c.hasClass("input-sm")?u.addClass("input-group-sm"):c.hasClass("input-lg")&&u.addClass("input-group-lg")}()}(),o={down:j(".bootstrap-touchspin-down",u),up:j(".bootstrap-touchspin-up",u),input:j("input",u),prefix:j(".bootstrap-touchspin-prefix",u).addClass(i.prefix_extraclass),postfix:j(".bootstrap-touchspin-postfix",u).addClass(i.postfix_extraclass)},b(),c.on("keydown.touchspin",function(t){var n=t.keyCode||t.which;38===n?("up"!==f&&(x(),w()),t.preventDefault()):40===n&&("down"!==f&&(g(),m()),t.preventDefault())}),c.on("keyup.touchspin",function(t){var n=t.keyCode||t.which;38===n?_():40===n&&_()}),c.on("blur.touchspin",function(){h(),c.val(i.callback_after_calculation(c.val()))}),o.down.on("keydown",function(t){var n=t.keyCode||t.which;32!==n&&13!==n||("down"!==f&&(g(),m()),t.preventDefault())}),o.down.on("keyup.touchspin",function(t){var n=t.keyCode||t.which;32!==n&&13!==n||_()}),o.up.on("keydown.touchspin",function(t){var n=t.keyCode||t.which;32!==n&&13!==n||("up"!==f&&(x(),w()),t.preventDefault())}),o.up.on("keyup.touchspin",function(t){var n=t.keyCode||t.which;32!==n&&13!==n||_()}),o.down.on("mousedown.touchspin",function(t){o.down.off("touchstart.touchspin"),c.is(":disabled")||(g(),m(),t.preventDefault(),t.stopPropagation())}),o.down.on("touchstart.touchspin",function(t){o.down.off("mousedown.touchspin"),c.is(":disabled")||(g(),m(),t.preventDefault(),t.stopPropagation())}),o.up.on("mousedown.touchspin",function(t){o.up.off("touchstart.touchspin"),c.is(":disabled")||(x(),w(),t.preventDefault(),t.stopPropagation())}),o.up.on("touchstart.touchspin",function(t){o.up.off("mousedown.touchspin"),c.is(":disabled")||(x(),w(),t.preventDefault(),t.stopPropagation())}),o.up.on("mouseup.touchspin mouseout.touchspin touchleave.touchspin touchend.touchspin touchcancel.touchspin",function(t){f&&(t.stopPropagation(),_())}),o.down.on("mouseup.touchspin mouseout.touchspin touchleave.touchspin touchend.touchspin touchcancel.touchspin",function(t){f&&(t.stopPropagation(),_())}),o.down.on("mousemove.touchspin touchmove.touchspin",function(t){f&&(t.stopPropagation(),t.preventDefault())}),o.up.on("mousemove.touchspin touchmove.touchspin",function(t){f&&(t.stopPropagation(),t.preventDefault())}),c.on("mousewheel.touchspin DOMMouseScroll.touchspin",function(t){if(i.mousewheel&&c.is(":focus")){var n=t.originalEvent.wheelDelta||-t.originalEvent.deltaY||-t.originalEvent.detail;t.stopPropagation(),t.preventDefault(),n<0?g():x()}}),c.on("touchspin.destroy",function(){var t;t=c.parent(),_(),c.off(".touchspin"),t.hasClass("bootstrap-touchspin-injected")?(c.siblings().remove(),c.unwrap()):(j(".bootstrap-touchspin-injected",t).remove(),t.removeClass("bootstrap-touchspin")),c.data("alreadyinitialized",!1)}),c.on("touchspin.uponce",function(){_(),x()}),c.on("touchspin.downonce",function(){_(),g()}),c.on("touchspin.startupspin",function(){w()}),c.on("touchspin.startdownspin",function(){m()}),c.on("touchspin.stopspin",function(){_()}),c.on("touchspin.updatesettings",function(t,n){!function(t){(function(t){if(i=j.extend({},i,t),t.postfix){var n=c.parent().find(".bootstrap-touchspin-postfix");0===n.length&&a.insertAfter(c),c.parent().find(".bootstrap-touchspin-postfix .input-group-text").text(t.postfix)}if(t.prefix){var o=c.parent().find(".bootstrap-touchspin-prefix");0===o.length&&p.insertBefore(c),c.parent().find(".bootstrap-touchspin-prefix .input-group-text").text(t.prefix)}b()})(t),h();var n=o.input.val();""!==n&&(n=Number(i.callback_before_calculation(o.input.val())),o.input.val(i.callback_after_calculation(Number(n).toFixed(i.decimals))))}(n)});var s}()})}});

!function(t){"use strict";var e=0,i=function(e,i){this.options=i,this.$elementFilestyle=[],this.$element=t(e)};i.prototype={clear:function(){this.$element.val(""),this.$elementFilestyle.find(":text").val(""),this.$elementFilestyle.find(".badge").remove()},destroy:function(){this.$element.removeAttr("style").removeData("filestyle"),this.$elementFilestyle.remove()},disabled:function(t){if(!0===t)this.options.disabled||(this.$element.attr("disabled","true"),this.$elementFilestyle.find("label").attr("disabled","true"),this.options.disabled=!0);else{if(!1!==t)return this.options.disabled;this.options.disabled&&(this.$element.removeAttr("disabled"),this.$elementFilestyle.find("label").removeAttr("disabled"),this.options.disabled=!1)}},buttonBefore:function(t){if(!0===t)this.options.buttonBefore||(this.options.buttonBefore=!0,this.options.input&&(this.$elementFilestyle.remove(),this.constructor(),this.pushNameFiles()));else{if(!1!==t)return this.options.buttonBefore;this.options.buttonBefore&&(this.options.buttonBefore=!1,this.options.input&&(this.$elementFilestyle.remove(),this.constructor(),this.pushNameFiles()))}},icon:function(t){if(!0===t)this.options.icon||(this.options.icon=!0,this.$elementFilestyle.find("label").prepend(this.htmlIcon()));else{if(!1!==t)return this.options.icon;this.options.icon&&(this.options.icon=!1,this.$elementFilestyle.find(".icon-span-filestyle").remove())}},input:function(t){if(!0===t)this.options.input||(this.options.input=!0,this.options.buttonBefore?this.$elementFilestyle.append(this.htmlInput()):this.$elementFilestyle.prepend(this.htmlInput()),this.$elementFilestyle.find(".badge").remove(),this.pushNameFiles(),this.$elementFilestyle.find(".group-span-filestyle").addClass("input-group-btn"));else{if(!1!==t)return this.options.input;if(this.options.input){this.options.input=!1,this.$elementFilestyle.find(":text").remove();var e=this.pushNameFiles();e.length>0&&this.options.badge&&this.$elementFilestyle.find("label").append(' <span class="badge">'+e.length+"</span>"),this.$elementFilestyle.find(".group-span-filestyle").removeClass("input-group-btn")}}},size:function(t){if(void 0===t)return this.options.size;var e=this.$elementFilestyle.find("label"),i=this.$elementFilestyle.find("input");e.removeClass("btn-lg btn-sm"),i.removeClass("input-lg input-sm"),"nr"!=t&&(e.addClass("btn-"+t),i.addClass("input-"+t))},placeholder:function(t){if(void 0===t)return this.options.placeholder;this.options.placeholder=t,this.$elementFilestyle.find("input").attr("placeholder",t)},buttonText:function(t){if(void 0===t)return this.options.buttonText;this.options.buttonText=t,this.$elementFilestyle.find("label .buttonText").html(this.options.buttonText)},buttonName:function(t){if(void 0===t)return this.options.buttonName;this.options.buttonName=t,this.$elementFilestyle.find("label").attr({class:"btn "+this.options.buttonName})},iconName:function(t){if(void 0===t)return this.options.iconName;this.$elementFilestyle.find(".icon-span-filestyle").attr({class:"icon-span-filestyle "+this.options.iconName})},htmlIcon:function(){return this.options.icon?'<span style="margin-right: 3px;" class="icon-span-filestyle '+this.options.iconName+'"></span> ':""},htmlInput:function(){return this.options.input?'<input type="text" class="form-control '+("nr"==this.options.size?"":"input-"+this.options.size)+'" placeholder="'+this.options.placeholder+'" disabled> ':""},pushNameFiles:function(){var t="",e=[];void 0===this.$element[0].files?e[0]={name:this.$element[0]&&this.$element[0].value}:e=this.$element[0].files;for(var i=0;i<e.length;i++)t+=e[i].name.split("\\").pop()+", ";return""!==t?this.$elementFilestyle.find(":text").val(t.replace(/\, $/g,"")):this.$elementFilestyle.find(":text").val(""),e},constructor:function(){var i=this,n="",s=i.$element.attr("id"),l="";""!==s&&s||(s="filestyle-"+e,i.$element.attr({id:s}),e++),l='<span class="group-span-filestyle '+(i.options.input?"input-group-btn":"")+'"><label for="'+s+'" class="btn '+i.options.buttonName+" "+("nr"==i.options.size?"":"btn-"+i.options.size)+'" '+(i.options.disabled||i.$element.attr("disabled")?'disabled="true"':"")+">"+i.htmlIcon()+'<span class="buttonText">'+i.options.buttonText+"</span></label></span>",n=i.options.buttonBefore?l+i.htmlInput():i.htmlInput()+l,i.$elementFilestyle=t('<div class="bootstrap-filestyle input-group">'+n+"</div>"),i.$elementFilestyle.find(".group-span-filestyle").attr("tabindex","0").keypress(function(t){if(13===t.keyCode||32===t.charCode)return i.$elementFilestyle.find("label").click(),!1}),i.$element.css({position:"absolute",clip:"rect(0px 0px 0px 0px)"}).attr("tabindex","-1").after(i.$elementFilestyle),(i.options.disabled||i.$element.attr("disabled"))&&i.$element.attr("disabled","true"),i.$element.change(function(){var t=i.pushNameFiles();0==i.options.input&&i.options.badge?0==i.$elementFilestyle.find(".badge").length?i.$elementFilestyle.find("label").append(' <span class="badge">'+t.length+"</span>"):0==t.length?i.$elementFilestyle.find(".badge").remove():i.$elementFilestyle.find(".badge").html(t.length):i.$elementFilestyle.find(".badge").remove()}),window.navigator.userAgent.search(/firefox/i)>-1&&i.$elementFilestyle.find("label").click(function(){return i.$element.click(),!1})}};var n=t.fn.filestyle;t.fn.filestyle=function(e,n){var s="",l=this.each(function(){if("file"===t(this).attr("type")){var l=t(this),o=l.data("filestyle"),a=t.extend({},t.fn.filestyle.defaults,e,"object"==typeof e&&e);o||(l.data("filestyle",o=new i(this,a)),o.constructor()),"string"==typeof e&&(s=o[e](n))}});return void 0!==typeof s?s:l},t.fn.filestyle.defaults={buttonText:"Choose file",iconName:"glyphicon glyphicon-folder-open",buttonName:"btn-default",size:"nr",input:!0,badge:!0,icon:!0,buttonBefore:!1,disabled:!1,placeholder:""},t.fn.filestyle.noConflict=function(){return t.fn.filestyle=n,this},t(function(){t(".filestyle").each(function(){var e=t(this),i={input:"false"!==e.attr("data-input"),icon:"false"!==e.attr("data-icon"),buttonBefore:"true"===e.attr("data-buttonBefore"),disabled:"true"===e.attr("data-disabled"),size:e.attr("data-size"),buttonText:e.attr("data-buttonText"),buttonName:e.attr("data-buttonName"),iconName:e.attr("data-iconName"),badge:"false"!==e.attr("data-badge"),placeholder:e.attr("data-placeholder")};e.filestyle(i)})})}(window.jQuery);

(function(){$(document).ready(function(){decorateCarousel();});function decorateCarousel(){$(".product-references-carousel-container .owl-carousel").owlCarousel({navigation:true,navigationText:["<span class='glyphicon glyphicon-chevron-left'></span>","<span class='glyphicon glyphicon-chevron-right'></span>"],pagination:true,paginationNumbers:false,responsive:true,itemsCustom:[[0,1],[480,2],[768,4],[1200,6]],rewindNav:false});}
var $qtySelector=$(".product-references-carousel-container .js-qty-selector");$qtySelector.each(function(index){var input=$(this).find(".js-qty-selector-input");var inputVal=parseInt(input.val());var max=input.data("max");var min=input.data("min");var step=input.data("step");$(input).TouchSpin({initval:1,min:min,step:step,max:max});$(".addtocart-component .js-add-to-cart").on("click ",function(e){input.blur();});});})();
;

$(document).ready(function(){$e=$(".tabs-cms-js");var tabs=$e.accessibleTabs({tabhead:'.tabhead',tabbody:'.tabbody',fx:'show',fxspeed:0,currentClass:'active',autoAnchor:true});$(".cms-tab-a").click(function(e){e.preventDefault();var contentId=$(this).attr('href');$(".tabhead").each(function(){var headId=contentId.replace("#","");if($(this).attr("id")!=headId){$(this).removeClass("active");}});var contentDiv=$("div"+contentId+".tabhead");if(contentDiv.hasClass("active")){contentDiv.removeClass("active");}else{contentDiv.addClass("active");var offset=$(this).offset().top;$("body,html").scrollTop(offset);}});});

ACC.checkoutsummary={_autoload:["bindAllButtons","bindScheduleReplenishment","replenishmentInit"],bindAllButtons:function()
{ACC.checkoutsummary.toggleActionButtons('.place-order-form');},toggleActionButtons:function(selector){var cssClass=$(document).find(selector);var checkoutBtns=cssClass.find('.checkoutSummaryButton');var checkBox=cssClass.find('input[name=termsCheck]')
if(checkBox.is(':checked')){checkoutBtns.prop('disabled',false);}
checkBox.on('click',function(){var checked=$(this).prop('checked');if(checked){checkoutBtns.prop('disabled',false);}else{checkoutBtns.prop('disabled',true);}});},validateDate:function(date,dateFormat){var validDate=true;try{$.datepicker.parseDate(dateFormat,date);}catch(err){validDate=false;}
return validDate;},toggleReplenishmentScheduleDateError:function(showError){if(showError){var datePickerElem=$('#replenishmentSchedule .datepicker');if(!datePickerElem.hasClass('has-error')){datePickerElem.addClass('has-error');}
$('#errorReplenishmentStartDate').show();}else{$('#replenishmentSchedule .datepicker').removeClass('has-error');$('#errorReplenishmentStartDate').hide();}},bindScheduleReplenishment:function(data)
{var form=$('#placeOrderForm1');var placeReplenishment=false;$(document).on("click",".scheduleReplenishmentButton",function(e){e.preventDefault();var termChecked=$(this).closest("form").find('input[name=termsCheck]').is(':checked');form.find('input[name=termsCheck]').prop('checked',termChecked);var titleHtml=$('.scheduleReplenishmentButton').first().html();ACC.colorbox.open(titleHtml,{href:"#replenishmentSchedule",inline:true,width:"620px",onComplete:function(){ACC.checkoutsummary.toggleReplenishmentScheduleDateError(false);$(this).colorbox.resize();placeReplenishment=false;},onClosed:function(){if(placeReplenishment){form.submit();}
$(".replenishmentOrderClass").val(false);}});$("input:radio[name=replenishmentRecurrence]").click(function(){if($("#replenishmentStartDate").val()!=''){$('#replenishmentSchedule .js-replenishment-actions').show();}
switch(this.value)
{case"DAILY":$('.scheduleformD').show();$('.scheduleformW').hide();$('.scheduleformM').hide();break;case"WEEKLY":$('.scheduleformD').hide();$('.scheduleformW').show();$('.scheduleformM').hide();break;default:$('.scheduleformD').hide();$('.scheduleformW').hide();$('.scheduleformM').show();};$.colorbox.resize();});});$(document).on("click",'#replenishmentSchedule #cancelReplenishmentOrder',function(e){e.preventDefault();$(".replenishmentOrderClass").val(false);$.colorbox.close();});$(document).on("click",'#replenishmentSchedule #placeReplenishmentOrder',function(e){e.preventDefault();var localeDateFormat=$('#replenishmentSchedule').data('dateForDatePicker');var dateEntered=$("#replenishmentStartDate").val();if(ACC.checkoutsummary.validateDate(dateEntered,localeDateFormat)){$(".replenishmentOrderClass").val(true);placeReplenishment=true;$.colorbox.close();}else{ACC.checkoutsummary.toggleReplenishmentScheduleDateError(true);$.colorbox.resize();}});$(document).on("change",'#replenishmentStartDate',function(e){ACC.checkoutsummary.toggleReplenishmentScheduleDateError(false);$.colorbox.resize();});$(document).on("click",'#replenishmentSchedule .js-open-datepicker',function(){$('#replenishmentSchedule .hasDatepicker').datepicker('show');});},replenishmentInit:function()
{var placeOrderFormReplenishmentOrder=$('#replenishmentSchedule').data("placeOrderFormReplenishmentOrder");var placeOrderFormReplenishmentRecurrence=$('#replenishmentSchedule').data("placeOrderFormReplenishmentRecurrence");var dateForDatePicker=$('#replenishmentSchedule').data("dateForDatePicker");var placeOrderFormNDays=$('#replenishmentSchedule').data("placeOrderFormNDays");var placeOrderFormNthDayOfMonth=$('#replenishmentSchedule').data("placeOrderFormNthDayOfMonth");if(placeOrderFormReplenishmentOrder===undefined){return;}
if(!placeOrderFormReplenishmentOrder){$('#replenishmentSchedule .js-replenishment-actions').hide();$("input:radio[name='replenishmentRecurrence'][value=DAILY]").prop('checked',false);$('.scheduleformD').hide();$("#nDays option[value="+placeOrderFormNDays+"]").attr('selected','selected');$("input:radio[name='replenishmentRecurrence'][value=WEEKLY]").prop('checked',false);$('.scheduleformW').hide();$("input:radio[name='replenishmentRecurrence'][value=MONTHLY]").prop('checked',false);$('.scheduleformM').hide();if(placeOrderFormNthDayOfMonth!='')
$("#nthDayOfMonth option[value="+placeOrderFormNthDayOfMonth+"]").attr('selected','selected');$("#replenishmentStartDate").val("");}
else{switch(placeOrderFormReplenishmentRecurrence)
{case"DAILY":$('.scheduleformD').show();break;case"WEEKLY":$('.scheduleformW').show();break;default:$('.scheduleformM').show();};}
$(".js-replenishment-datepicker").datepicker({dateFormat:dateForDatePicker,onClose:function(){if($(this).val()==''){$('#replenishmentSchedule .js-replenishment-actions').hide();}
else{if($("input:radio[name=replenishmentRecurrence]").is(':checked')){$('#replenishmentSchedule .js-replenishment-actions').show();$.colorbox.resize();}}}});}};

ACC.paymentType={_autoload:["bindPaymentTypeSelect","showHideCostCenterSelect"],bindPaymentTypeSelect:function()
{$("input:radio[name='paymentType']").change(function()
{ACC.paymentType.showHideCostCenterSelect();});},showHideCostCenterSelect:function(){var paymentTypeSelected=$("input:radio[name='paymentType']:checked").val();if(paymentTypeSelected=="ACCOUNT"){$("#costCenter").show();}else{$("#costCenter").hide();}}};

ACC.replenishment={_autoload:["bindToCancelReplenishmentOrderActionButton","bindToCancelReplenishmentOrderCancelButton"],bindToCancelReplenishmentOrderActionButton:function()
{$(document).on("click",'.js-replenishment-cancel-button',ACC.replenishment.handleCancelReplenishmentOrderButtonClick);},bindToCancelReplenishmentOrderCancelButton:function()
{$(document).on("click",'.js-replenishment-order-cancel-modal-cancel-button',ACC.replenishment.handleCancelReplenishmentOrderCancelButtonClick);},handleCancelReplenishmentOrderButtonClick:function(){var replenishmentNumber=$(this).data('job-code');var popupTitle=ACC.common.encodeHtml($(this).data('popup-title'));ACC.colorbox.open(popupTitle,{inline:true,className:"replenishment-order-cancel-modal",href:"#popup_confirm_replenishment_order_cancellation_"+replenishmentNumber,width:'435px',onComplete:function()
{$(this).colorbox.resize();}});},handleCancelReplenishmentOrderCancelButtonClick:function(){ACC.colorbox.close();}};

var ACC=ACC||{};if($("#orderFormContainer").length>0){ACC.orderform={_autoload:["bindAll"],$selectedProductIdsContainer:$("#js-selected-product-ids"),$productIdsInput:$("#js-product-ids"),$enableProductIdsCheckBox:$("#js-enable-product-ids"),$productIdTagBoxTemplate:$("#product-id-tag-box-template"),$removeProductIdButton:$(".js-remove-product-id"),$advSearchButton:$(".adv_search_button"),$orderFormToggle:$(".js-show-order-form-grid-wrapper"),$searchCurrentLabel:$(".searchInput label"),$createOrderFormButton:$(".js-create-order-form-button"),$createOrderFormCheckbox:$(".js-checkbox-sku-id, .js-checkbox-base-product"),$baseProductCheckBox:$(".js-checkbox-base-product"),$skuIDCheckbox:$(".js-checkbox-sku-id"),$skuQuantityOrderInput:$(".sku-quantity"),$addToCartBtn:$('#js-add-to-cart-order-form-btn-top, #js-add-to-cart-order-form-btn-bottom'),$orderForm:$("#isCreateOrderForm"),$userQtyInputSelection:$("input[data-product-selection]"),$totalPrice:$('.js-total-price'),$totalItemsCount:$('.js-total-items-count > span'),$totalPriceValue:$('.js-total-price-value'),$advancedSearchForm:$('#advancedSearchForm'),bindAll:function(){ACC.orderform.bindToToggleProductIds(ACC.orderform.$enableProductIdsCheckBox);ACC.orderform.bindToRemoveProductId(ACC.orderform.$removeProductIdButton);ACC.orderform.bindToAdvSearchButton(ACC.orderform.$advSearchButton);ACC.orderform.bindOrderFormToggle(ACC.orderform.$orderFormToggle);ACC.orderform.bindToCreateOrderFormButton(ACC.orderform.$createOrderFormButton);ACC.orderform.bindToBaseProductCheckBox(ACC.orderform.$baseProductCheckBox);ACC.orderform.bindToSkuIDCheckBox(ACC.orderform.$skuIDCheckbox);ACC.orderform.bindAddToCartClick(ACC.orderform.$addToCartBtn);if(ACC.orderform.$enableProductIdsCheckBox.prop("checked")){ACC.orderform.replaceSearchLabel(true);ACC.orderform.appendProductIdsForSearch();}
if($("#search-create-order-form").prop("checked")){ACC.orderform.makeUserSelectionAfterPagination();ACC.orderform.setStateOrderFormButton();}else{ACC.orderform.fillQuantityValueForPagination(ACC.orderform.$userQtyInputSelection);}
ACC.orderform.$advancedSearchForm.find("input[name='CSRFToken']").remove();},bindOrderFormToggle:function(orderFormToggle){orderFormToggle.click(function(event){var $this=$(this);$(this).toggleClass('open');var orderFormGridWrapper=$(this).parents('.js-item-list-item').next('.js-order-form-grid-wrapper');orderFormGridWrapper.slideToggle("slow",function(){if(!$this.data('calc')){var scrollingContent=orderFormGridWrapper.children('#cartOrderGridForm').addClass('visible');ACC.productorderform.coreTableScrollActions(scrollingContent);$this.data('calc',true);}});});},bindToAdvSearchButton:function(advSearchButton){advSearchButton.click(function(event){if(ACC.orderform.$enableProductIdsCheckBox.prop("checked")){if(ACC.orderform.$productIdsInput.val()!=""){ACC.orderform.appendProductIdsForSearch();}
ACC.orderform.$productIdsInput.val(ACC.orderform.getProductsIdsFromSessionStorage());}
ACC.orderform.stripOutInvalidChars();if(ACC.orderform.$orderForm.val()){sessionStorage.clear();}else{ACC.orderform.cleanupQtyInputFromSessionStorage();}});},bindToCreateOrderFormButton:function(createOrderFormButton){createOrderFormButton.click(function(event){ACC.orderform.stripOutInvalidChars();ACC.orderform.$productIdsInput.val(ACC.orderform.getProductsIdsFromSessionStorage());ACC.orderform.$orderForm.val(true);sessionStorage.removeItem("checkedProducts");ACC.orderform.$selectedProductIdsContainer.empty();ACC.orderform.$enableProductIdsCheckBox.attr("checked",false);ACC.orderform.$advSearchButton.click();});},bindToBaseProductCheckBox:function(baseProductCheckBox){baseProductCheckBox.click(function(event){var baseProduct=this;$(ACC.orderform.$skuIDCheckbox).each(function(){if($(this).attr("base-product-code")&&$(this).attr("base-product-code")==baseProduct.value){$(this).prop("checked",baseProduct.checked);ACC.orderform.addProductIdsToSessionStorage(this);}})});},bindToSkuIDCheckBox:function(skuIDCheckbox){skuIDCheckbox.click(function(event){ACC.orderform.addProductIdsToSessionStorage(this);});},addToSkuQtyInput:function(_this){if(ACC.orderform.$totalItemsCount.length!=0&&ACC.orderform.$totalItemsCount.text()==0){ACC.orderform.$addToCartBtn.attr('disabled','disabled');}else{ACC.orderform.$addToCartBtn.removeAttr('disabled');}
var qtyInputs=ACC.orderform.fetchOrPopulateSessionStorageObj("qtyInputs");var qtyInputJson=JSON.parse($(_this).attr("data-product-selection"));var filteredObjects=ACC.orderform.filterMatchingQtyInputs(qtyInputs,qtyInputJson);for(var i=0;i<filteredObjects.length;i++){qtyInputs.splice(qtyInputs.indexOf(filteredObjects[i]),1);}
qtyInputJson['qty']=_this.value;qtyInputs.push(qtyInputJson);sessionStorage.setItem("qtyInputs",JSON.stringify(qtyInputs));ACC.orderform.setTotalItemPrice($(_this),_this.value,$(_this).siblings('.price').data('variant-price'));},setStateOrderFormButton:function(){ACC.orderform.$createOrderFormButton.attr('disabled','disabled');var checkedProducts=ACC.orderform.getProductsIdsFromSessionStorage();if(checkedProducts.length>0){ACC.orderform.$createOrderFormButton.removeAttr("disabled");}
else{ACC.orderform.$createOrderFormButton.attr('disabled','disabled');}},addProductIdsToSessionStorage:function(checkbox){var clickedProductIds=JSON.parse(sessionStorage.getItem("checkedProducts"));if(clickedProductIds==null||clickedProductIds==undefined){sessionStorage.setItem("checkedProducts",JSON.stringify([]))
clickedProductIds=new Array();}
var ifProductExist=clickedProductIds.indexOf(checkbox.value);if(checkbox.checked){if(ifProductExist==-1)
clickedProductIds.push(checkbox.value);}else{if(ifProductExist!=-1)
clickedProductIds.splice(ifProductExist,1);}
sessionStorage.setItem("checkedProducts",JSON.stringify(clickedProductIds));console.log(sessionStorage.getItem("checkedProducts"));ACC.orderform.setStateOrderFormButton();},fetchOrPopulateSessionStorageObj:function(item){var storageObj=JSON.parse(sessionStorage.getItem(item));if(storageObj==null||storageObj==undefined){sessionStorage.setItem(item,JSON.stringify([]))
storageObj=new Array();}
return storageObj},makeUserSelectionAfterPagination:function(){var clickedProductIds=JSON.parse(sessionStorage.getItem("checkedProducts"));if(clickedProductIds!=null){$(ACC.orderform.$skuIDCheckbox).each(function(){if(clickedProductIds.indexOf(this.value)!=-1)
$(this).prop("checked",true);})}},fillQuantityValueForPagination:function(userQtyInputSelection){var qtyInputs=JSON.parse(sessionStorage.getItem("qtyInputs"));var prevParentId,prevVariantLoop,parentTable={};if(qtyInputs!=null&&qtyInputs.length>0){userQtyInputSelection.each(function(obj){var filteredObjects=ACC.orderform.filterMatchingQtyInputs(qtyInputs,JSON.parse($(this).attr('data-product-selection')));if(filteredObjects!=null&&filteredObjects.length>0){var qty=filteredObjects[0].qty;var resetSummary=false;$(this).attr('value',qty);if(this.hasAttribute('data-variant-id')){if(prevVariantLoop===$(this).parents('table').data('variant-loop')){resetSummary=true;}
ACC.productorderform.calculateVariantTotal($(this),qty);if(prevParentId===$(this).data('parent-id')&&prevVariantLoop===$(this).parents('table').data('variant-loop')){ACC.productorderform.updateSelectedVariantGridTotal(this,0,false,resetSummary);}
else{ACC.productorderform.updateSelectedVariantGridTotal(this,0,true,resetSummary);}
prevParentId=$(this).data('parent-id');parentTable=$(this).parents('table');prevVariantLoop=parentTable.data('variant-loop');}}});ACC.orderform.$addToCartBtn.removeAttr("disabled");}
ACC.orderform.resetPriceCounters();},getProductsIdsFromSessionStorage:function(){var clickedProductIds=ACC.orderform.fetchOrPopulateSessionStorageObj("checkedProducts");if(clickedProductIds!=null&&clickedProductIds!=""){return clickedProductIds.join(",");}
return[];},removeProductIdFromSessionStorage:function(productId){var clickedProductIds=JSON.parse(sessionStorage.getItem("checkedProducts"));var ifProductExist=clickedProductIds.indexOf(productId);if(ifProductExist!=-1){clickedProductIds.splice(ifProductExist,1);}
sessionStorage.setItem("checkedProducts",JSON.stringify(clickedProductIds));},bindToToggleProductIds:function(addProductIdsCheckBox){addProductIdsCheckBox.on("change",function(event){var checked=$(this).prop("checked");ACC.orderform.replaceSearchLabel(checked);var joinedProductIds=$.map(ACC.orderform.$selectedProductIdsContainer.find(".product-id-tag-box .product-id"),function(index){return $(index).text()}).join(", ");if(joinedProductIds!==""){ACC.orderform.$productIdsInput.val(joinedProductIds);}
ACC.orderform.$selectedProductIdsContainer.empty();});},appendProductIdsForSearch:function(){ACC.orderform.stripOutInvalidChars();var productIds=ACC.orderform.$productIdsInput.val().split(",");productIds=$.map(productIds,function(productId,index){return($.trim(productId));});productIds=$.unique(productIds);var presentProductIds=ACC.orderform.fetchOrPopulateSessionStorageObj("checkedProducts");$.each(productIds,function(index,productId){var $existingProductId=ACC.orderform.$selectedProductIdsContainer.find("#product-id-"+productId);if(productId!==''&&$existingProductId.length==0){ACC.orderform.$productIdTagBoxTemplate.tmpl({productId:productId,index:index}).appendTo(ACC.orderform.$selectedProductIdsContainer);}
if(presentProductIds.indexOf(productId)==-1){presentProductIds.push(productId);}});sessionStorage.setItem("checkedProducts",JSON.stringify(presentProductIds));ACC.orderform.$productIdsInput.val('');ACC.orderform.$productIdsInput.focus();},bindAddToCartClick:function(addToCartBtn){addToCartBtn.click(function(){$.ajax({url:ACC.productorderform.$addToCartOrderForm.attr("action"),type:'POST',dataType:'json',contentType:'application/json',data:ACC.orderform.getJSONDataForAddToCart(),async:false,success:function(response){$(window).off('beforeunload',ACC.productorderform.beforeUnloadHandler);ACC.product.displayAddToCartPopup(response);ACC.orderform.cleanUserQtySelection(ACC.orderform.$userQtyInputSelection);},error:function(jqXHR,textStatus,errorThrown){console.log("The following error occured: "+textStatus,errorThrown);}});});},getJSONDataForAddToCart:function(){var qtyInputs=ACC.orderform.fetchOrPopulateSessionStorageObj("qtyInputs");var skusAsJSON=[];for(var i=0;i<qtyInputs.length;i++){if(parseInt(qtyInputs[i].qty)>0){skusAsJSON.push({"product":{"code":qtyInputs[i].product},"quantity":qtyInputs[i].qty});}}
return JSON.stringify({"cartEntries":skusAsJSON});},bindToRemoveProductId:function(removeProductIdButton){ACC.orderform.$selectedProductIdsContainer.on("click",removeProductIdButton,function(event){event.preventDefault();var valueToRemove=$(event.target).parents('.js-remove-product-id');ACC.orderform.removeProductIdFromSessionStorage($(valueToRemove).children('.product-id').text());$(valueToRemove).remove();ACC.orderform.$selectedProductIdsContainer.empty();ACC.orderform.$enableProductIdsCheckBox.attr("checked",true);ACC.orderform.$productIdsInput.val(ACC.orderform.getProductsIdsFromSessionStorage());ACC.orderform.$advSearchButton.click();});},cleanUserQtySelection:function(userQtyInputSelection){var qtyInputs=ACC.orderform.fetchOrPopulateSessionStorageObj("qtyInputs");if(qtyInputs!=null&&qtyInputs.length>0){userQtyInputSelection.each(function(){$(this).prop('value',0);ACC.orderform.$addToCartBtn.attr('disabled','disabled');ACC.orderform.setTotalItemPrice($(this),0,0);})}
ACC.productorderform.cleanValues();ACC.productorderform.resetSelectedVariant();ACC.orderform.$totalPrice.html(ACC.productorderform.formatTotalsCurrency('0.00'));ACC.orderform.$totalItemsCount.text('0');ACC.orderform.$totalPriceValue.val(0);ACC.orderform.cleanupQtyInputFromSessionStorage();},replaceSearchLabel:function(productIdsChecked){var currentLabelHtml=ACC.orderform.$searchCurrentLabel.html();var searchByIdsLabelHtml=ACC.common.encodeHtml($("#searchByIdsLabel").val());var searchByKeywordLabelHtml=ACC.common.encodeHtml($("#searchByKeywordLabel").val());if(productIdsChecked){currentLabelHtml=currentLabelHtml.replace(searchByKeywordLabelHtml,searchByIdsLabelHtml);}else{currentLabelHtml=currentLabelHtml.replace(searchByIdsLabelHtml,searchByKeywordLabelHtml);}
ACC.orderform.$searchCurrentLabel.html(currentLabelHtml);},stripOutInvalidChars:function(){ACC.orderform.$productIdsInput.val(ACC.orderform.$productIdsInput.val().replace(/[^a-z0-9 ,.\-_]/ig,''));},cleanupQtyInputFromSessionStorage:function(){sessionStorage.removeItem("qtyInputs");sessionStorage.removeItem("totalPrice");sessionStorage.removeItem("totalPriceVal");sessionStorage.removeItem("totalItems");},resetPriceCounters:function(){ACC.orderform.$totalItemsCount.text(sessionStorage.totalItems);if(sessionStorage.totalPrice!==undefined){ACC.orderform.$totalPrice.html((ACC.sanitizer.sanitize(sessionStorage.totalPrice)));}else{ACC.orderform.$totalPrice.html(ACC.productorderform.formatTotalsCurrency('0.00'));}
ACC.orderform.$totalPriceValue.val(sessionStorage.totalPriceVal||0);ACC.orderform.fillTotalItemPrice();},setTotalItemPrice:function(item,quantity,price){if(!item.data('variant-id')){var htmlContent=(quantity>0)?ACC.productorderform.formatTotalsCurrency(price*quantity):'';item.parent().next('.item-total').html(htmlContent);}},fillTotalItemPrice:function(){if(sessionStorage.qtyInputs!==undefined){var qtyInputsJson=JSON.parse(sessionStorage.qtyInputs);var $product={};for(var i=0;i<qtyInputsJson.length;i++){if(qtyInputsJson[i].qty>0){$product=$('.'+qtyInputsJson[i].product);var totalPrice=ACC.productorderform.formatTotalsCurrency($product.siblings('.price').data('variant-price')*qtyInputsJson[i].qty);$product.parent().siblings('.item-total').html(totalPrice);}}}},filterMatchingQtyInputs:function(qtyInputs,dataValueObj){var filteredObjects=$.grep(qtyInputs,function(obj){return dataValueObj.product==obj.product;});return filteredObjects;}};};

ACC.approval={_autoload:["bindToModalActionButton","bindToOrderApprovalDecisionButtons","bindToModalCancelButton"],bindToModalActionButton:function(){$(document).on('click','.approverDecisionButton',function(){var form=ACC.approval.currentForm;form.find('#approverSelectedDecision').attr("value",$(this).data('decision'));ACC.approval.isDecisionMade=true;ACC.colorbox.close();});},bindToModalCancelButton:function(){$(document).on('click','.cancelOrderApprovalCommentButton',function(e){e.preventDefault();ACC.colorbox.close();});},bindToOrderApprovalDecisionButtons:function(){ACC.approval.bindToOrderApprovalDecisionButton('.approverDecisionApprovalButton','.orderApprovalApproveCommentModal');ACC.approval.bindToOrderApprovalDecisionButton('.approverDecisionRejectButton','.orderApprovalRejectCommentModal');},bindToOrderApprovalDecisionButton:function(decisionButtonSelector,popupModalSelector){$(document).on('click',decisionButtonSelector,function(e){e.preventDefault();var form=$(this).closest("form");var titleHtml=$(this).html();var quoteCommentModal=form.find(popupModalSelector);ACC.approval.currentForm=form;form.find('textarea').val('');ACC.approval.isDecisionTaken=false;ACC.colorbox.open(titleHtml,{href:quoteCommentModal,inline:true,width:"620px",onClosed:function(){if(ACC.approval.isDecisionMade){form.submit();}}});});}};

(function(){var dynamicFormData;var jsVariablesElement;var fileSizeErrorMessage;var uploadErrorMessage;var spacePlaceholder="!@!";var underscorePlaceholder="&^&";$(document).ready(function(){var dynamicForm=$('.dynamic-form');jsVariablesElement=document.getElementById('jsVariables');if(jsVariablesElement){fileSizeErrorMessage=jsVariablesElement.dataset.filesizeerrortext;uploadErrorMessage=jsVariablesElement.dataset.uploaderrortext;}
if(dynamicForm.length>0){getFormInstanceData();bindDynamicFormsRemoveBtn();}});$('#dynamicFormSubmitButton').unbind('click').click(function(event){event.preventDefault();$.ajax({type:'POST',url:"form/submit",contentType:'application/json',data:JSON.stringify(dynamicFormData),success:function(data,textStatus,jqXHR){window.location=ACC.config.encodedContextPath+data;},error:function(jqXHR,textStatus,errorThrown){}});});$('#dynamicFormVerifyButton').unbind('click').click(function(event){event.preventDefault();$.ajax({type:'POST',url:"form/verify",contentType:'application/json',data:JSON.stringify(dynamicFormData),success:function(data,textStatus,jqXHR){window.location=ACC.config.encodedContextPath+data;},error:function(jqXHR,textStatus,errorThrown){}});});$('input[id^="text_"]').unbind('change').change(function(){var fieldId=this.dataset.fieldId;var fieldValue=$(this)[0].value;setAttributeValue(fieldId,fieldValue,false)});$('textarea[id^="text_"]').unbind('change').change(function(){var fieldId=this.dataset.fieldId;var fieldValue=$(this)[0].value;setAttributeValue(fieldId,fieldValue,false)});$('select[id^="select_"]').unbind('change').change(function(){var fieldId=this.dataset.fieldId;var fieldValueToAdd=this.options[this.selectedIndex].id;setAttributeValue(fieldId,fieldValueToAdd,false);});$('button[id^="add_reference_mv_"]').unbind('click').click(function(event){event.preventDefault();var fieldId=this.dataset.fieldId;var selector=document.getElementById('mv_select_'+fieldId);var fieldValueToAdd=selector.options[selector.selectedIndex].value
setAttributeValue(fieldId,fieldValueToAdd,true);});$('button[id^="add_mv_"]').unbind('click').click(function(event){event.preventDefault();var fieldId=this.dataset.fieldId;var fieldValueToAdd=document.getElementById('mv_text_'+fieldId).value;setAttributeValue(fieldId,fieldValueToAdd,true);document.getElementById('mv_text_'+fieldId).value='';});$('.file-upload').on('change',function(event,numFiles,label){event.preventDefault();var fieldId=this.dataset.fieldId;var files=document.getElementById('fileUpload_'+fieldId).files;for(var i=0;i<files.length;i++){var file=files[i];if(file.size<=20848820){document.getElementById('fileUploadLabel_'
+fieldId).innerHTML="";var fieldValueToAdd=file.name;addUploadedFile(fieldId,files[i],fieldValueToAdd);}else{document.getElementById('fileUploadLabel_'
+fieldId).innerHTML=fileSizeErrorMessage;}}
$(":file").filestyle('clear');})
function removeFieldValuesFromUI(fieldId){var ul=document.getElementById("field_mv_list_"+fieldId);ul.innerHTML="";}
function addFieldValuesToUI(fieldId,fieldValues){for(i=0;i<fieldValues.length;i++){var escapedValue=fieldValues[i].replace(/</g,"&lt;").replace(/>/g,"&gt;");var liValueName=fieldValues[i].split(' ').join(spacePlaceholder).split('_').join(underscorePlaceholder);var liElement=document.createElement("li");var dataSpan=document.createElement('span')
var removeSpan=document.createElement('span')
var anchor=document.createElement("A");var divRow=document.createElement("div");var divCol_10=document.createElement("div");var divCol_2=document.createElement("div");anchor.id='removeValue_'+fieldId+'_'+liValueName;removeSpan.id='removeValueSpan_'+fieldId+'_'+liValueName;liElement.id='li_'+fieldId+'_'+liValueName;anchor.setAttribute('data-field-id',fieldId);removeSpan.setAttribute('data-field-id',fieldId);liElement.setAttribute('data-field-id',fieldId);dataSpan.innerHTML=escapedValue;dataSpan.setAttribute('class','break-all');anchor.setAttribute('class','dynamic-form-multiValue-button js-dynamicforms-remove-btn pull-right');removeSpan.setAttribute('aria-hidden','true');removeSpan.setAttribute('class','glyphicon glyphicon-trash dynamic-form-multiValue-button');liElement.setAttribute('class','list-group-item');divRow.setAttribute('class','row');divCol_10.setAttribute('class','col-xs-10');divCol_2.setAttribute('class','col-xs-2');anchor.appendChild(removeSpan);divCol_10.appendChild(dataSpan)
divCol_2.appendChild(anchor)
divRow.appendChild(divCol_10)
divRow.appendChild(divCol_2)
liElement.appendChild(divRow);document.getElementById('field_mv_list_'+fieldId).appendChild(liElement);}
bindDynamicFormsRemoveBtn();}
function refreshUI(fieldId,fieldValues){removeFieldValuesFromUI(fieldId);addFieldValuesToUI(fieldId,fieldValues);}
function removeFieldValue(element){var fieldId=element.dataset.fieldId;var liName=element.id.replace('removeValue_'+fieldId+'_','');var fieldValueToRemove=liName.split(spacePlaceholder).join(' ').split(underscorePlaceholder).join('_');liName=fieldValueToRemove.split(' ').join(spacePlaceholder).split('_').join(underscorePlaceholder);for(i=0;i<dynamicFormData.fieldSets.length;i++){for(j=0;j<dynamicFormData.fieldSets[i].fields.length;j++){var field=dynamicFormData.fieldSets[i].fields[j];if(field.id==fieldId){var values=field.value;if(arrayContains(fieldValueToRemove,values)){removeElementFromArray(values,fieldValueToRemove)
dynamicFormData.fieldSets[i].fields[j].value=values;refreshUI(fieldId,values);}
break;}}}}
function setAttributeValue(fieldId,fieldValueToAdd,shouldRefreshUI){var breakOuterLoop=false;for(i=0;i<dynamicFormData.fieldSets.length;i++){for(j=0;j<dynamicFormData.fieldSets[i].fields.length;j++){var field=dynamicFormData.fieldSets[i].fields[j];if(field.id==fieldId){if(field.allowMultipleValues&&field.value===undefined){dynamicFormData.fieldSets[i].fields[j].value=[];}
else if(!field.allowMultipleValues&&field.value.length!=0){dynamicFormData.fieldSets[i].fields[j].value=[];}
if(!arrayContains(fieldValueToAdd,dynamicFormData.fieldSets[i].fields[j].value)){dynamicFormData.fieldSets[i].fields[j].value.push(fieldValueToAdd);if(shouldRefreshUI){refreshUI(fieldId,dynamicFormData.fieldSets[i].fields[j].value);}}
breakOuterLoop=true;break;}}
if(breakOuterLoop){break;}}}
function addUploadedFile(fieldId,file,fieldValueToAdd){var data=new FormData();data.append("file",file);if(document.getElementById("dynamicFormSubmitButton")){document.getElementById("dynamicFormSubmitButton").disabled="disabled";}
if(document.getElementById("dynamicFormVerifyButton")){document.getElementById("dynamicFormVerifyButton").disabled="disabled";}
$.ajax({url:"form/uploadFile?CSRFToken="+ACC.config.CSRFToken
+"&fieldId="+fieldId,type:'POST',data:data,cache:false,dataType:'json',processData:false,contentType:false,success:function(data,textStatus,jqXHR){$("#dynamicFormSubmitButton").removeAttr("disabled");$("#dynamicFormVerifyButton").removeAttr("disabled");$("#mv_add_file_"+fieldId).removeAttr("disabled");$("#add_file_"+fieldId).removeAttr("disabled");$("#fileUpload_"+fieldId).val('');setAttributeValue(fieldId,fieldValueToAdd,true);},error:function(jqXHR,textStatus,errorThrown){$("#dynamicFormSubmitButton").removeAttr("disabled");$("#dynamicFormVerifyButton").removeAttr("disabled");$("#mv_add_file_"+fieldId).removeAttr("disabled");$("#add_file_"+fieldId).removeAttr("disabled");document.getElementById('fileUploadLabel_'+fieldId).innerHTML=uploadErrorMessage;}});}
function getFormInstanceData(){$.ajax({type:'GET',url:"form/getFormInstanceData",success:function(data,textStatus,jqXHR){dynamicFormData=data;},error:function(jqXHR,textStatus,errorThrown){}});}
function bindDynamicFormsRemoveBtn(){$('.js-dynamicforms-remove-btn').unbind('click').click(function(event){event.preventDefault();removeFieldValue(this);});}
function arrayContains(value,valuesArray){return(valuesArray.indexOf(value)>-1);}
function removeElementFromArray(array,element){const index=array.indexOf(element);if(index!==-1){array.splice(index,1);}}})();

(function(){$(window).resize(function(){setContainerSizeAndPosition();});if($('#feedbackLink')&&$('#feedbackContainer')){$('#feedbackContainer').css('right','-'+$('#feedbackContainer').outerWidth()+'px');$('#feedbackContainer').show();setContainerSizeAndPosition();$('#feedbackLink').click(function(e){e.preventDefault();slideInFeedbackForm();$('#feedbackForm')[0].reset();});$('#feedBackClose').click(function(e){e.preventDefault();slideInFeedbackForm();});}
$('#clearFeedBackForm').click(function(e){e.preventDefault();$('#feedbackForm')[0].reset();});if($('#feedbackForm').length){var form=$('#feedbackForm');form.append("<input type='hidden' name='feedback_current_location' value='"+window.location.href+"'/>");form.submit(function(event){event.preventDefault();$('.positive').addClass('disabled');$('.positive').prop('type','button');$('#feedbackContainer #feedbackResponseArea').hide();$.ajax({type:form.attr('method'),url:form.attr('action'),data:form.serialize(),beforeSend:function(xhr){$('#feedbackFormContainer').isLoading({class:"fa fa-spinner fa-spin fa-3x fa-fw",position:'overlay'});}}).done(function(data){if(data==true){showResponseMessage('positive','Thank you for your Feedback!');}else{showResponseMessage('negative','Feedback could not be sent! Please try again.');}
window.setTimeout(slideAfterFeedback,2000);}).fail(function(data){showResponseMessage('negative','Feedback could not be sent! Please try again.');});});};function slideAfterFeedback(){slideInFeedbackForm();$('.positive').removeClass('disabled');$('.positive').prop('type','submit');};function showResponseMessage(type,message){$('#feedbackFormContainer').isLoading('hide');$('#feedbackContainer #feedbackResponseArea').show();$('#feedbackFormContainer').css('margin-top','0px');$('#feedbackContainer #feedbackResponseArea').removeClass('negative');$('#feedbackContainer #feedbackResponseArea').removeClass('positive');$('#feedbackContainer #feedbackResponseArea').addClass(type);$('#feedbackContainer #feedbackResponseArea').text(message);}
function slideInFeedbackForm(){var container=$('#feedbackContainer');if(container.hasClass('open')){container.removeClass('open');}else{container.addClass('open');}}
function setContainerSizeAndPosition(){var top='40%';var maxSpace=$(window).height()-parseInt($('#feedbackContainer').css('top'));var containerHeight=$('#feedbackContainer').outerHeight(true);var deltaHeight=0;if($('#feedbackContainer #feedbackResponseArea').is(':visible')){deltaHeight=$('#feedbackContainer #feedbackResponseArea').outerHeight();}
if(maxSpace>=530){$('#feedbackFormContainer').css('height',(500-deltaHeight)+'px');}else{$('#feedbackFormContainer').css('height',(maxSpace-30-deltaHeight)+'px');}}
$('.addToCartButton').removeAttr("disabled");function configRegionSpecificComponent(){$(".js-region-specific-consent").css('display','');var applicableRegions=$(".js-region-specific-consent").data("applicable-ip-regions");if(applicableRegions){cookieRegion=$.cookie("userIpRegion");if(cookieRegion){$(applicableRegions).each(function(index,region){if(region.toUpperCase()==cookieRegion.toUpperCase()){$(".js-region-specific-consent").removeClass("hidden");return false;}});}else{$.ajax({url:"https://json.geoiplookup.io/",type:'GET',dataType:'json',success:function(response){if(response.region){$.cookie("userIpRegion",response.region);$(applicableRegions).each(function(index,region){if(region.toUpperCase()==response.region.toUpperCase()){$(".js-region-specific-consent").removeClass("hidden");return false;}});}},error:function(jqXHR,textStatus,errorThrown){console.log("The following error occured: "+textStatus,errorThrown);}});}}}
function initNotificationReceiverMappingComponent(){if($("#notificationReceiverMappingComponent").length){$.ajax({url:"notifications/get-mappings",type:'GET',dataType:'json',contentType:'application/json',async:true,success:function(response){if(response.status){$("#notificationManagementFormContainer","#notificationReceiverMappingComponent").html(response.form.join("\n"));$('#saveMappingBtn',"#notificationReceiverMappingComponent").on("click",function(event){event.preventDefault();showBusy();$("#notificationManagementMessage","#notificationReceiverMappingComponent").html("");$("#notificationManagementForm").ajaxSubmit({url:"notifications/update-mappings",type:'post',success:function(response){$.isLoading("hide");$(".help-block","#notificationReceiverMappingComponent").remove();if(response.status){var messageElement=$('<div class="alert alert-success"></div>');$(messageElement).html(response.infoMessage);$("#notificationManagementMessage","#notificationReceiverMappingComponent").html(messageElement);}else{var errorElement=$('<div class="alert alert-danger"></div>');$(errorElement).html(response.errorMessage);$("#notificationManagementMessage","#notificationReceiverMappingComponent").html(errorElement);if(response.formError){var errorField=$("[name='"+response.formError.field.replace("[","[\"").replace("]","\"]")+"']","#notificationReceiverMappingComponent");errorElement=$('<div class="help-block"></div>');$(errorElement).html(response.formError.message);$(errorElement).insertAfter($(errorField));}}},error:function(jqXHR,textStatus,errorThrown){$.isLoading("hide");console.log("The following error occured: "+textStatus,errorThrown);}});});$('.js-remove-notification-receiver-contact',"#notificationReceiverMappingComponent").on("click",function(event){var selectId=$(this).data("role-code");$("#"+selectId).prop('selectedIndex',0);$(this).attr('disabled','disabled');});$('.js-remove-notification-receiver-contact',"#notificationReceiverMappingComponent").each(function(){var selectId=$(this).data("role-code");if($("#"+selectId).prop('selectedIndex')==0){$(this).attr('disabled','disabled');}
var removeBtn=this;$("#"+selectId).on("change",function(){if($(this).prop('selectedIndex')!=0){$(removeBtn).removeAttr("disabled");}else{$(removeBtn).attr('disabled','disabled');}});});}else{var errorElement=$('<div class="alert alert-danger"></div>');$(errorElement).html(response.errorMessage);$("#notificationManagementMessage","#notificationReceiverMappingComponent").html(errorElement);}},error:function(jqXHR,textStatus,errorThrown){console.log("The following error occured: "+textStatus,errorThrown);}});}}
$(window).on("load",function(){configRegionSpecificComponent();initNotificationReceiverMappingComponent();});})();

var SYCOR=SYCOR||{};SYCOR.equipmentSearch={formSelector:'#equipmentSearchForm',$form:$('#equipmentSearchForm'),$link:$('#equipmentSearch'),$messages:$('#equipmentSearchForm .messages'),bind:function(formSelector,linkSelector){SYCOR.equipmentSearch.formSelector=formSelector;SYCOR.equipmentSearch.$form=$(formSelector);SYCOR.equipmentSearch.$messages=$('#equipmentSearchForm ~.messages');SYCOR.equipmentSearch.$searchresults=$('#equipmentSearchForm ~.search-results');SYCOR.equipmentSearch.$link=$(linkSelector);SYCOR.equipmentSearch.bindForm();},bindForm:function(){SYCOR.equipmentSearch.$form.submit(function(event){event.preventDefault();var url=SYCOR.equipmentSearch.$form.attr('action');var formElements=SYCOR.equipmentSearch.$form.serialize();$.post(url,formElements,function(response){SYCOR.equipmentSearch.$searchresults.find(".messages").empty();SYCOR.equipmentSearch.$searchresults.find(".results").empty();SYCOR.equipmentSearch.$searchresults.find(".noresult").addClass("hidden");SYCOR.equipmentSearch.$searchresults.find(".material-information-container").addClass("hidden");SYCOR.equipmentSearch.showResults(response);},"json");});SYCOR.equipmentSearch.$form.find('button[type="reset"]').click(function(event){var url=SYCOR.equipmentSearch.$form.attr('action');$.post(url,{clear:true});SYCOR.equipmentSearch.$searchresults.find("h4").addClass("hidden");SYCOR.equipmentSearch.$searchresults.find(".results").empty();SYCOR.equipmentSearch.$searchresults.find(".noresult").addClass("hidden");SYCOR.equipmentSearch.$searchresults.find(".messages").empty();SYCOR.equipmentSearch.$searchresults.find(".material-information-container").addClass("hidden");});},showResults:function(response){if(jQuery.isEmptyObject(response)){SYCOR.equipmentSearch.$searchresults.find("h4.success").addClass("hidden");SYCOR.equipmentSearch.$searchresults.find("p.noresult").addClass("hidden");}else{var hasMessages=false;var msg='';$(response).each(function(){if(this.code=='error'){msg+=this.message;hasMessages=true;}});if(hasMessages){SYCOR.equipmentSearch.$searchresults.find(".messages").text(msg);}else{SYCOR.equipmentSearch.$searchresults.find("h4.success").removeClass("hidden");SYCOR.equipmentSearch.$searchresults.find("p.noresult").addClass("hidden");SYCOR.equipmentSearch.$searchresults.find(".results").empty();SYCOR.equipmentSearch.$searchresults.find(".material-information-container").addClass("hidden");var resultList=$('<ul class="results list-group"></ul>');var emptyResult=true;for(var key in response){if(key=='E_MATNR'&&response[key]){$("#articleNumber").text(response[key]);SYCOR.equipmentSearch.$searchresults.find(".material-information-container").show();emptyResult=false;}
else if(key=='E_MAKTX'&&response[key]){$("#articleName").text(response[key]);SYCOR.equipmentSearch.$searchresults.find(".material-information-container").show();emptyResult=false;}
else if(key!='E_MATNR'&&key!='E_MAKTX'){var resultEntry='<li class="list-group-item">'+'<strong>'+key+': </strong>'+'<small>'+response[key]+'</small></li>';resultList.append(resultEntry);emptyResult=false;}}
SYCOR.equipmentSearch.$searchresults.append(resultList);if(emptyResult){SYCOR.equipmentSearch.$searchresults.find("p.noresult").removeClass("hidden");SYCOR.equipmentSearch.$searchresults.find(".material-information-container").addClass("hidden");}
else{SYCOR.equipmentSearch.$searchresults.find("p.noresult").addClass("hidden");SYCOR.equipmentSearch.$searchresults.find(".material-information-container").removeClass("hidden");}}}},setMessages:function(response){var results='';$(response).each(function(){results+=this+'<br/>';});SYCOR.equipmentSearch.$searchresults.find(".results").empty();SYCOR.equipmentSearch.$messages.children('p').html(results);SYCOR.equipmentSearch.$searchresults.find(".material-information-container").hide();}};(function(){SYCOR.equipmentSearch.bind('#equipmentSearchForm','#equipmentSearch');})();

$(document).ready(function(){showCreatePopUp();clearSearchPanelFields();pressedDeleteButton();showUpdatePopUp();});showCreatePopUp=function(){$('.createDialogButton').click(function(){var title=$(this).data("title");var url=$(this).data("href");$.ajax({type:"GET",url:$(this).data("href"),success:function(data){ACC.colorbox.open(title,{html:data.formData,width:"50%",onComplete:function(){$('.cp-close-button','#contactPartnerForm').on('click',closePopup);$('#contactPartnerForm').attr('action',url);$('#contactPartnerForm').on('submit',ConfirmSaveAction);}});}});});},clearSearchPanelFields=function(){$(document).ready(function(){$('.cp-clear-button').on("click",function(e){$('#searchForm').find("input[type=text]").val("");$("#filterContactPartnerRole").val($("#filterContactPartnerRole option:first").val());$('#searchForm').submit();});});},pressedDeleteButton=function(){$('#contact-partner-table,#broken-contact-partner-table').on('click','.detachDialogButton',function(){var $this=$(this);var url=$this.data('href');var customerId=$(this).closest("tr").data('customerid');var customerUid=$(this).closest("tr").data('uid');$('#deleteDialogContactPartnerCustomerId').val(customerId);$('#deleteDialogContactPartnerCustomerUid').val(customerUid);ACC.colorbox.open($(this).data('title'),{html:$("#deleteDialog").html(),width:"50%",onComplete:function(){$('.cp-close-button').on('click',closePopup);}});});},showUpdatePopUp=function(){$('#contact-partner-table,#broken-contact-partner-table').on('click','.updateDialogButton',function(){var customerId=$(this).closest("tr").data('customerid');var role=$(this).closest("tr").data('role');var email=$(this).closest("tr").data('email');var phone=$(this).closest("tr").data('phone');var name=$(this).closest("tr").data('name');var uid=$(this).closest("tr").data('uid');var title=$(this).data("title");var customertitle=$(this).closest("tr").data("customertitle");$.ajax({type:"GET",url:$(this).data("href"),success:function(data){ACC.colorbox.open(title,{html:data.formData,width:"50%",onComplete:function(){$('#contactPartnerCustomerId').val(customerId);$('#contactPartnerCustomerUid').val(uid);if(role&&$("#contactPartnerRole").val(role).length!=0){$('#contactPartnerRole').val(role).prop("selected",true);}
var nameParts=name.split(" ");$('#contactPartnerFistName').val(nameParts[0]);nameParts.shift();$('#contactPartnerLastName').val(nameParts.join(" "));$('#contactPartnerPhone').val(phone);if(customertitle&&$("#contactPartnerTitle").val(customertitle).length!=0){$("#contactPartnerTitle").val(customertitle).prop("selected",true);}
$('#contactPartnerEmail').val(email);if(!JSON.parse(data.unmanaged)){$("#contactPartnerEmail").prop("readonly",true);}
$('.cp-close-button','#contactPartnerForm').on('click',closePopup);$('#contactPartnerForm').on('submit',ConfirmSaveAction);}})}});});},ConfirmSaveAction=function(){event.preventDefault();var form=$('#contactPartnerForm');var url=$(this).attr("action");$.ajax({url:url,type:"POST",data:$(this).serialize(),success:function(data){if(!data.feedbackMessage){var formData=data.formData;$('#cboxLoadedContent').html(formData);if($("#contactPartnerForm").attr("action").indexOf("update")>0){if(!JSON.parse(data.unmanaged)){$("#contactPartnerEmail").prop("readonly",true);}}
$('.cp-close-button','#contactPartnerForm').on('click',closePopup);$('#contactPartnerForm').on('submit',ConfirmSaveAction);}else{$('#cboxLoadedContent').html(data.messageData);$('.cp-close-button','#messagesDialog').on('click',reloadContacts);ACC.colorbox.resize();}},error:function(xhr,desc,err){console.log("Desc: "+desc+"\nErr:"+err);}});},reloadContacts=function(){var url=$(this).data("href");ACC.colorbox.close();window.location.href=url;},closePopup=function(){$('#deleteDialogContactPartnerCustomerId').val("");$('#deleteDialogContactPartnerCustomerUid').val("");$('#contactPartnerCustomerUid').val("");ACC.colorbox.close();};

$(document).ready(function(){$('[data-toggle="tooltip"]').tooltip();});
;

var SYCOR=SYCOR||{};SYCOR.salesDoc={$buttons:$('#placeInquiry a.button, #orderQuote a.button'),$cancelButton:$('.ob-confirm-btn a.cancel'),bindAll:function(){SYCOR.salesDoc.showConfirmPopUp();},showConfirmPopUp:function(){SYCOR.salesDoc.$buttons.click(function(){$(this).colorbox({href:"#ob-confirm-popUp",inline:true,width:450});});}};(function(){SYCOR.salesDoc.bindAll();})();function SycorSalesDocBoxes(){var $salesDocBoxes=$('.salesDocBoxes, .orderBoxes').find('.salesDocBox, .orderBox');this.alignHeight=function(){var maxHeight=-1;var $tmpBox=null;$salesDocBoxes.each(function(){if($tmpBox===null){$tmpBox=$(this);}else{var tmpHeight=$tmpBox.outerHeight();var thisHeight=$(this).outerHeight();var maxHeight=thisHeight>tmpHeight?thisHeight:tmpHeight;$tmpBox.css('min-height',maxHeight+'px');$(this).css('min-height',maxHeight+'px');$tmpBox=null;}});};};function SycorSalesDocFilter(){var $form=$('form.selectionCriteria');var $selector=$('#selectOption');var initFilter=function(){var currentValue=$selector.val();var currentOption=$selector.find('option[value="'+currentValue+'"]');var count=currentOption.data('index');var $filters=$('.allFilters div[class^="filter_"]');var $activeFilter=$filters.filter('.filter_'+count);$filters.addClass('hidden');$activeFilter.removeClass('hidden');};var bindSelector=function(){$selector.change(function(){var currentValue=$(this).val();var currentOption=$(this).find('option[value="'+currentValue+'"]');var count=currentOption.data('index');var $filters=$('.allFilters div[class^="filter_"]');var $activeFilter=$filters.filter('.filter_'+count);$filters.addClass('hidden');$activeFilter.removeClass('hidden');$activeFilter.find('input, select').first().focus();});};var bindDatepicker=function(){$form.find('input[type="date"]').each(function(){var $input=$(this);if($input.prop('type')!=='date'){var $alt=$input.clone();$alt.attr('type','hidden');$alt.removeAttr('id');$input.data('name',$input.attr('name'));$input.removeAttr('name');$alt.insertAfter($input);var date=$input.val();$input.datepicker({firstDay:1,dateFormat:'MM d, yy',altField:$alt,altFormat:'yy-mm-dd',changeYear:true,changeMonth:true});$input.datepicker('setDate',new Date(date));}});};var bindFormSubmit=function(){$form.submit(function(){$(this).find('input[type="date"].hasDatepicker').prop("disabled",true);var $filters=$('.allFilters div[class^="filter_"]');var $hiddenFilters=$filters.filter('.hidden');$hiddenFilters.find(':input').prop("disabled",true);var $sort=$('#sortOptions1').clone();$sort.removeAttr('id').addClass('hidden');$(this).append($sort);});};var bindSortForm=function(){$('#sort_form1,#sort_form2').each(function(){var $currentDocType=$('#salesDocType').clone();$currentDocType.removeAttr('id');var $currentSelector=$selector.clone();$currentSelector.removeAttr('id').addClass('hidden');var $currentFilter=$form.find('.allFilters div[class^="filter_"]').not('.hidden').clone();$currentFilter.addClass('hidden');$(this).append($currentDocType,$currentSelector,$currentFilter);});};var bindPagination=function(){$('ul.pagination a, a.showAll, a.showPagination').each(function(){var $salesDocType=$('#salesDocType');var $visibleInputs=$form.find('.allFilters div[class^="filter_"]').not('.hidden').find('input[name],select');var parameters=$salesDocType.serialize()+'&'+$selector.serialize()+'&'+$visibleInputs.serialize();var location=$(this).attr('href')+'&'+parameters;if(location.indexOf('sort=&')>-1){var sortOrder=$('#sortOptions1').val();location=location.replace('sort=','sort='+sortOrder);}
$(this).attr('href',location);});};this.bindAll=function(){initFilter();bindSelector();bindDatepicker();bindFormSubmit();bindSortForm();bindPagination();};};ACC.obreturns={$returnButton:$('a.ob-return-btn, button.ob-return-btn'),$deniedButton:$('.questionsButtonBlock a.negative'),$cancelButton:$('a.ob-btn-cancel, button.ob-btn-cancel'),$closeButton:$('a.ob-btn-close'),$confirmButton:$('#ob-return a.ob-btn-confirm'),$headerSelectionButton:$('#ob-return a.ob-btn-headerSelection'),$itemSelectionButton:$('#ob-return a.ob-btn-itemSelection'),rebindTags:function(){ACC.obreturns.$returnButton=$('a.ob-return-btn, button.ob-return-btn');ACC.obreturns.$deniedButton=$('.questionsButtonBlock a.negative');ACC.obreturns.$cancelButton=$('a.ob-btn-cancel, button.ob-btn-cancel');ACC.obreturns.$closeButton=$('a.ob-btn-close');ACC.obreturns.$confirmButton=$('#ob-return a.ob-btn-confirm');ACC.obreturns.$headerSelectionButton=$('#ob-return a.ob-btn-headerSelection');ACC.obreturns.$itemSelectionButton=$('#ob-return a.ob-btn-itemSelection');},bindAll:function(){ACC.obreturns.bindSpinner();ACC.obreturns.$returnButton.each(function(){ACC.obreturns.showReturnConfirm($(this));});ACC.obreturns.$deniedButton.each(function(){ACC.obreturns.showReturnConfirmDenied($(this));});ACC.obreturns.$cancelButton.each(function(){$.colorbox.resize();$(this).on('click',function(){$('#colorbox').hide();ACC.obreturns.showBusy();location.reload();});});ACC.obreturns.$closeButton.each(function(){$.colorbox.resize();$(this).on('click',function(){$('#colorbox').hide();ACC.obreturns.showBusy();location.reload();});});ACC.obreturns.$confirmButton.each(function(){ACC.obreturns.showReturnFormData($(this));});$('#returnForm').submit(function(event){event.preventDefault();var $form=$(this);ACC.obreturns.submitReturnForm($form);});},bindSpinner:function(){$('#returnForm').find('input[type="number"]').each(function(){var $input=$(this);if($input.prop('type')!=="number"){var name=$input.attr('name');var max=$input.attr('max');$select=$('<select name="'+name+'"></select>');for(var i=0;i<=max;i++){$select.append('<option value="'+i+'">'+i+'</option>');}
$input.after($select).remove();}});},showReturnConfirm:function($el){$el.click(function(){$(this).colorbox({href:"#ob-return-confirm",inline:true,height:200,width:450,onComplete:function(){$.colorbox.resize();}});});},showReturnConfirmDenied:function($el){$el.click(function(){$(this).colorbox({href:"#ob-no-return-confirm",inline:true,height:200,width:450,onComplete:function(){$.colorbox.resize();}});});},showReturnFormData:function($el){$el.click(function(){$("#returnData").show();var popupTitle=$("#returnFormTitle").html();$(this).colorbox({href:"#returnForm",inline:true,height:500,width:450,title:popupTitle,close:'<span class="glyphicon glyphicon-remove"></span>',onComplete:function(){$.colorbox.resize();}});});},showMessages:function(response){var messages=$('#returnForm .message');messages.attr("class",response.messageType);messages.html(response.message);},hideButtons:function(){$('#returnForm .button').hide();},addCloseButton:function(){$('a.ob-btn-close').removeClass('hidden');$('a.ob-btn-close').css('display','block');},showBusy:function(){if($('body').children('.isloading-overlay').length<1){$.isLoading({class:"fa fa-spinner fa-spin fa-3x fa-fw"});}},hideBusy:function(){$.isLoading("hide");},submitReturnForm:function($form){var url=$form.attr('action');var formElements=$form.serialize();ACC.obreturns.showBusy();$.post(url,formElements,function(response){var messageType=response.messageType;if(messageType.indexOf("positive")>=0){ACC.obreturns.hideButtons();ACC.obreturns.addCloseButton();}
ACC.obreturns.showMessages(response);$.colorbox.resize();ACC.obreturns.hideBusy();});}};ACC.oborderentrypricing={bindAll:function(){$(".orderentrytotals-show-discounts").each(function(index){var id=$(this).attr("id");var targetId=$(this).attr("data-target-container-id");$(this).popover({placement:"left auto",html:true,content:function(){var targetId=$(this).attr('data-target-container-id');var selector="#"+targetId;return $(selector).html();}});});}};(function(){ACC.obreturns.bindAll();ACC.oborderentrypricing.bindAll();})();
;
;

var CPQ=CPQ||{};CPQ.core={pageType:"config",baseUrl:"",ajaxRunning:false,ajaxRunCounter:0,ajaxRunCounterAsyncServices:0,ajaxStartTimeAsyncServices:0,ajaxStopTimeAsyncServices:0,ajaxStartTime:0,ajaxStopTime:0,ajaxServerStartTime:0,ajaxServerStopTime:0,ajaxServerStartTimeAsyncServices:0,ajaxServerStopTimeAsyncServices:0,configState:0,formNameId:"#configform",waitingMsgTriggeredHandle:"",successMsgHideTriggeredHandle:"",firePost:function(fx,args){CPQ.core.ajaxRunCounter++;if(CPQ.core.ajaxRunCounter===1){CPQ.core.ajaxStartTime=new Date().getTime();CPQ.core.waitingMsgTriggeredHandle=setTimeout(function(){CPQ.core.showWaitingMessage();},500);}
CPQ.core.waitToFirePost(fx,args);},waitToFirePost:function(fx,args){if(CPQ.core.ajaxRunning===true){setTimeout(function(){CPQ.core.waitToFirePost.call(this,fx,args);},100);}else{CPQ.core.ajaxRunning=true;fx.apply(this,args);}},showWaitingMessage:function(){if($(".cpq-engine-state-success").is(":visible")){clearTimeout(CPQ.core.successMsgHideTriggeredHandle);$(".cpq-engine-state-success").removeAttr('role');$(".cpq-engine-state-success").slideUp(300,function(){if(CPQ.core.ajaxRunning===true){$(".cpq-engine-state-running").slideDown(300,function(){$(".cpq-engine-state-running").attr('role','alert');});}});}else{$(".cpq-engine-state-running").slideDown(300,function(){$(".cpq-engine-state-running").attr('role','alert');});}},lastAjaxDone:function(){clearTimeout(CPQ.core.waitingMsgTriggeredHandle);if($(".cpq-engine-state-running").is(":visible")){$(".cpq-engine-state-running").removeAttr('role');$(".cpq-engine-state-running").slideUp(300,function(){$(".cpq-engine-state-success").slideDown(function(){$(".cpq-engine-state-success").attr('role','alert');});CPQ.core.successMsgHideTriggeredHandle=setTimeout(function(){$(".cpq-engine-state-success").removeAttr('role');$(".cpq-engine-state-success").slideUp(300);},5000);});}
CPQ.core.ajaxStopTime=new Date().getTime();},encodeId:function(id){var encodedId="#"+$.escapeSelector(id);return encodedId;},getPageUrl:function(){return ACC.config.encodedContextPath+"/cpq/"+this.pageType;},getVaraiantSearchUrl:function(){return ACC.config.encodedContextPath+"/cpq/searchConfigVariant";},getResetUrl:function(){return"reset";},getAddToCartUrl:function(){return"addToCart";},getAddVariantToCartCleanUpUrl:function(){return"addVariantToCartCleanUp";},getOverviewUrl:function(){if(CPQ.core.pageType==="variantOverview"){return"variantOverview";}
return"configOverview";},getPricingUrl:function(){return ACC.config.encodedContextPath+"/cpq/updatePricing";},getAnalyticsUrl:function(){return ACC.config.encodedContextPath+"/cpq/updateAnalytics";},doRedirect:function(ajaxResponse){var redirectTag='<div id="redirectUrl">';var redirectIndex=ajaxResponse.indexOf(redirectTag);if(redirectIndex!==-1){redirectIndex=redirectIndex+redirectTag.length;var endTag="</div>";var endIndex=ajaxResponse.indexOf(endTag);if(endIndex!==-1){var redirect=ajaxResponse.substring(redirectIndex,endIndex);window.location.replace(redirect);}
return true;}
return false;},actionAndRedirect:function(e,action,url){var input=$('input[name=CSRFToken]');var token=null;var form=null;if(input&&input.length!==0){token=input.attr("value");}
if(token){form=$.parseHTML('<form action="'+action
+'" method="post" style="display: none;">'
+'<input type="text" name="url" value="'+url+'" />'
+'<input type="hidden" name="CSRFToken" value="'+token
+'" />'+'</form>');}else{form=$.parseHTML('<form action="'+action
+'" method="post" style="display: none;">'
+'<input type="text" name="url" value="'+url+'" />'
+'" />'+'</form>');}
$('body').append(form);$(form).submit();},prepareAsyncServiceCall:function(){CPQ.core.ajaxRunCounterAsyncServices++;if(CPQ.core.ajaxRunCounterAsyncServices===1){CPQ.core.ajaxStartTimeAsyncServices=new Date().getTime();}
var ret={};ret.data="productCode="
+$(CPQ.core.encodeId('kbKey.productCode')).val();ret.configState=CPQ.core.configState;if(CPQ.core.ajaxRunCounterAsyncServices===1){CPQ.core.ajaxServerStartTimeAsyncServices=new Date().getTime();}
return ret;}};

CPQ.uihandler={toggleExpandCollapseStyle:function(element,elementToBlind,prefix,noBlind){element.toggleClass(prefix+"-open");element.toggleClass(prefix+"-close");if(noBlind){elementToBlind.toggle();}else{elementToBlind.slideToggle(100);}},clickGroupHeader:function(postFx,e){if(e.which!==9){var groupElement=$(e.currentTarget);var groupTitleId=groupElement.attr("id");var groupId=CPQ.idhandler.getGroupIdFromGroupTitleId(groupTitleId);CPQ.uihandler.toggleExpandCollapseStyle(groupElement,groupElement.next(),"cpq-group-title");$("#cpqAction").val("TOGGLE_GROUP");$("#autoExpand").val(false);$("#groupIdToToggle").val(groupId);var data=$(CPQ.core.formNameId).serialize();CPQ.core.firePost(postFx,[e,data,groupTitleId]);}},updateSlotContent:function(response,slotName,excludeId){var newSlotContent=CPQ.uihandler.getNewSlotContent(response,slotName);$("#"+slotName).replaceWith(newSlotContent);specificationFollowsScrolling();},getNewSlotContent:function(response,slotName){var startTag='<div id="start:'+slotName+'" />';var endTag='<div id="end:'+slotName+'" />';var newContent="";var startIndex=response.indexOf(startTag);if(startIndex!==-1){startIndex=startIndex+startTag.length;var endIndex=response.indexOf(endTag);if(endIndex!==-1){newContent=response.substring(startIndex,endIndex);}}
return newContent;},storeState:function(selector,callback){var storedState={};storedState.items=[];$(selector).each(function(){var item={};if(callback){callback($(this),item);}else{item.id=$(this).attr('id');item.html=$(this).html();}
storedState.items.push(item);});return storedState;},restoreState:function(storedState,callback){$.each(storedState.items,function(index,item){if(callback){callback(item);}else{var div=$(CPQ.core.encodeId(item.id));if(div.length>0){div.html(item.html);}}});}};

CPQ.overview={bindAll:function(){CPQ.overview.bindStaticOnClickHandlers();CPQ.overview.bindDynamicOnClickHandlers();CPQ.overview.bindFacets();},bindStaticOnClickHandlers:function(){$(".product-details .name").on("click keypress",function(e){CPQ.imagehandler.clickHideShowImageGallery(CPQ.overview.doPost,e);});$(".cpq-btn-goToCart").on("click",function(e){CPQ.overview.clickGoToCartButton(e);});$(".cpq-btn-skip").on("click",function(e){CPQ.core.firePost(CPQ.core.actionAndRedirect,[e,CPQ.core.getResetUrl(),"/cart"]);});$(".facet__list > li > a").on("click",function(e){CPQ.overview.clickRemoveFilter(e);});$(".cpq-back-button, .cpq-btn-backToConfig, .cpq-btn-backToQuotation, .cpq-btn-backToOrder").on("click",function(e){CPQ.overview.clickBackToButton(e);});$(".cpq-btn-addVariantToCartCleanUp").on("click",function(e){CPQ.overview.clickAddVariantToCartCleanUp(e);});},bindDynamicOnClickHandlers:function(){$(".facet__list > li > a").on("click",function(e){CPQ.overview.clickRemoveFilter(e);});$(".cpq-overview-filter-item .facet__checkbox").on("change",function(e){CPQ.overview.clickApplyFilter(e);});},bindFacets:function(){$(document).on("click",".js-show-facets",function(e){e.preventDefault();var selectRefinementsTitle=$(this).data("selectRefinementsTitle");ACC.colorbox.open(selectRefinementsTitle,{href:"#cpq-overview-facet",inline:true,width:"480px",onComplete:function(){$(document).on("click",".cpq-js-overview-facet .js-facet__name",function(e){e.preventDefault();$(".cpq-js-overview-facet  .js-facet").removeClass("active");$(this).parents(".js-facet").addClass("active");$.colorbox.resize();});},onClosed:function(){$(document).off("click",".cpq-js-overview-facet .js-facet__name");}});});enquire.register("screen and (max-width:"+screenSmMax+")",function(){$("#cboxClose").click();});},doPost:function(e,data){CPQ.core.ajaxServerStartTime=new Date().getTime();$.post(CPQ.core.getPageUrl(),data,function(){CPQ.core.ajaxRunning=false;CPQ.core.ajaxRunCounter--;CPQ.core.ajaxStopTime=new Date().getTime();CPQ.core.ajaxServerStopTime=CPQ.core.ajaxStopTime;});e.preventDefault();e.stopPropagation();},doAddVariantToCartCleanUp:function(e,data){CPQ.core.ajaxServerStartTime=new Date().getTime();$.post(CPQ.core.getAddVariantToCartCleanUpUrl(),data,function(){CPQ.core.ajaxRunning=false;CPQ.core.ajaxRunCounter--;CPQ.core.ajaxStopTime=new Date().getTime();CPQ.core.ajaxServerStopTime=CPQ.core.ajaxStopTime;});},doFilterPost:function(e){$("#filterCPQAction").val("APPLY_FILTER");var data=$("#filterform").serialize();CPQ.core.ajaxServerStartTime=new Date().getTime();$.post(CPQ.core.getPageUrl(),data,function(response){if(CPQ.core.ajaxRunCounter===1){CPQ.core.ajaxServerStopTime=new Date().getTime();if(CPQ.core.doRedirect(response)){return;}
CPQ.overview.updateContent(response);}
CPQ.overview.bindDynamicOnClickHandlers();CPQ.overview.bindFacets();CPQ.core.ajaxRunning=false;CPQ.core.ajaxRunCounter--;CPQ.core.ajaxStopTime=new Date().getTime();});e.preventDefault();e.stopPropagation();},clickGoToCartButton:function(e){CPQ.core.firePost(CPQ.core.actionAndRedirect,[e,CPQ.core.getResetUrl(),"/cart"]);},clickBackToButton:function(e){var sUrl=$(e.currentTarget).data("back-to-url");window.location.assign(sUrl);},clickAddVariantToCartCleanUp:function(e){CPQ.core.firePost(CPQ.overview.doAddVariantToCartCleanUp,[e]);},clickApplyFilter:function(e){CPQ.overview.toggleFilterCheckbox(e);CPQ.core.firePost(CPQ.overview.doFilterPost,[e]);},toggleFilterCheckbox:function(e){var facet=$(e.currentTarget).siblings().find(".facet__list__mark");var className="filter-selected";if(facet.hasClass(className)){facet.removeClass(className);}else{facet.addClass(className);}},clickRemoveFilter:function(e){var facet=$(e.currentTarget);var facetCheckBox=$("#"+facet.data("filter-id"));facetCheckBox.prop("value",false);CPQ.core.firePost(CPQ.overview.doFilterPost,[e]);},updateContent:function(response){CPQ.uihandler.updateSlotContent(response,"overviewContentSlot");CPQ.uihandler.updateSlotContent(response,"overviewSidebarSlot");}};$(document).ready(function(){if($("#overviewContent").length>0){if($("#overviewMode").val()==='VARIANT_OVERVIEW'){CPQ.core.pageType="variantOverview";}else{CPQ.core.pageType="configOverview";}
CPQ.core.formNameId="#overviewform";CPQ.overview.bindAll();}});

CPQ.idhandler={getCsticIdFromCsticFieldId:function(csticFieldId){var csticId=csticFieldId.replace(/conflict.(.*).conflicts/g,"$1");return csticId;},getCsticIdFromViolatedCsticFieldId:function(csticFieldId){var csticId=csticFieldId.substring(0,csticFieldId.length-10);return csticId;},getGroupIdFromMenuNodeId:function(menuNodeId){var groupTitleId=menuNodeId.substring(9,menuNodeId.length);return groupTitleId;},getCsticIdFromConflictCstic:function(csticId){var cstic=csticId;if(csticId.indexOf("conflict.")===0){cstic=csticId.substring(9,csticId.length);}
return cstic;},getCsticIdFromLableId:function(csticFieldId){var csticId=csticFieldId.substring(0,csticFieldId.length-6);return csticId;},getGroupIdFromGroupTitleId:function(groupTitleId){var groupId=groupTitleId.substring(0,groupTitleId.length-6);return groupId;},getCsticIdFromFieldGeneric:function(fieldId){var csticId=fieldId.substr(0,fieldId.lastIndexOf("."));return csticId;},getCsticIdFromMessageId:function(messageId){var csticId=messageId.substring(0,messageId.length-16);return csticId;},getIdFromDDLB:function(optionId){var csticId=optionId.substr(0,optionId.lastIndexOf("."));return csticId;}};

CPQ.config={lastTarget:undefined,addToCartClickTimestamp:0,bindAll:function(){if(!String.prototype.startsWith){String.prototype.startsWith=function(searchString,position){position=position||0;return this.indexOf(searchString,position)===position;};}
CPQ.analyticshandler.init();CPQ.variantsearchhandler.getSimilarVariants();CPQ.pricinghandler.getPricing();CPQ.analyticshandler.getAnalytics();CPQ.ddlbhandler.cpqDdlb();CPQ.config.registerStaticOnClickHandlers();CPQ.config.doAfterPost();CPQ.config.generateAriaDescribedBy();$(window).resize(function(){CPQ.imagehandler.makeLabelsUnderImagesSameHeight('.cpq-csticValue','.cpq-csticValueImageLabel',true);});},registerStaticOnClickHandlers:function(){$(".product-details .name").on("click keypress",function(e){CPQ.imagehandler.clickHideShowImageGallery(CPQ.config.doUpdatePost,e);});$("#cpqMenuArea").on("click",function(e){CPQ.menuhandler.menuOpen(e);});},registerOnClickHandlers:function(){$(".cpq-group-title-close, .cpq-group-title-open").on("click keydown",function(e){CPQ.uihandler.clickGroupHeader(CPQ.config.doUpdatePost,e);});$(".cpq-btn-addToCart").on("mousedown",function(e){CPQ.config.addToCartClickTimestamp=e.timeStamp;});$(".cpq-btn-addToCart").on("mouseup",function(e){if((e.timeStamp-CPQ.config.addToCartClickTimestamp)<2000){CPQ.config.clickAddToCartButton();}});$(".cpq-btn-addToCart").on("keydown",function(e){if(e.which===13){CPQ.config.clickAddToCartButton();}});$(".cpq-csticlabel-longtext-icon").on('click',function(e){CPQ.config.longTextIconClicked(e);});$(".cpq-promo-message-link").on('click',function(e){CPQ.config.toggleMessageDetails(e);});$(".cpq-promo-message-link").on("keydown",function(e){if(e.which===13){CPQ.config.toggleMessageDetails(e);}});$(".resetCstic").on('click',function(e){e.preventDefault();CPQ.core.pageType="config/resetCisticByName";var data=$("#configform").serialize();data+="&csticName="+$(this).data("name");CPQ.core.firePost(CPQ.config.doUpdatePost,[e,data]);$('#configform').delay(1000);CPQ.core.pageType="config";});CPQ.config.registerConflictOnClickHandlers();CPQ.config.registerMenuOnClickHandlers();CPQ.config.registerPreviousNextOnClickHandlers();CPQ.config.registerCsticValueImageOnClickHandler();CPQ.analyticshandler.registerAnalyticsTooltip();},registerConflictOnClickHandlers:function(){$(".cpq-conflict-link-to-config").on("click",function(e){CPQ.config.handleConflictNavigation(CPQ.idhandler.getCsticIdFromCsticFieldId,"NAV_TO_CSTIC_IN_GROUP",e);});$(".cpq-conflict-link").on("click",function(e){CPQ.config.handleConflictNavigation(CPQ.idhandler.getCsticIdFromViolatedCsticFieldId,"NAV_TO_CSTIC_IN_CONFLICT",e);});$(".cpq-conflict-retractValue-button").on("click",function(e){CPQ.config.handleRetractConflict(e);});},registerMenuOnClickHandlers:function(){$(".cpq-menu-node, .cpq-menu-conflict-header").on("click",function(e){CPQ.menuhandler.menuGroupToggle(e);});$(".cpq-menu-leaf, .cpq-menu-conflict-node").on("click",function(e){CPQ.menuhandler.menuNavigation(e);});$(".cpq-menu-icon-remove").on("click",function(e){CPQ.menuhandler.menuClose(e);});},registerPreviousNextOnClickHandlers:function(){$(".cpq-previous-button").on("click",function(e){CPQ.config.previousNextButtonClicked("PREV_BTN",e);});$(".cpq-next-button").on("click",function(e){CPQ.config.previousNextButtonClicked("NEXT_BTN",e);});},registerCsticValueImageOnClickHandler:function(){var multiSelectValueImages=$(".cpq-cstic-value-container-multi");multiSelectValueImages.on("click",function(e){CPQ.imagehandler.csticValueImageMultiClicked(e);});multiSelectValueImages.on("keypress",function(e){if(e.which===13||e.which===32){CPQ.imagehandler.csticValueImageMultiClicked(e);}});var singleSelectValueImages=$(".cpq-cstic-value-container-single");singleSelectValueImages.on("click",function(e){CPQ.imagehandler.csticValueImageSingleClicked(e);});singleSelectValueImages.on("keypress",function(e){if(e.which===13||e.which===32){CPQ.imagehandler.csticValueImageSingleClicked(e);}});var valueImageContainer=$(".cpq-cstic-value-image-container");valueImageContainer.on("mouseenter",function(e){CPQ.focushandler.hoverOrFocusOnValueImage($(this));});valueImageContainer.on("focusin",function(e){CPQ.focushandler.hoverOrFocusOnValueImage($(this));});valueImageContainer.on("mouseleave",function(e){CPQ.focushandler.hoverLostOrBlurOnVlaueImage($(this));});valueImageContainer.on("focusout",function(e){CPQ.focushandler.hoverLostOrBlurOnVlaueImage($(this));});},longTextIconClicked:function(e){var labelId=$(e.currentTarget).parent().attr('id');var csticId=CPQ.idhandler.getCsticIdFromLableId(labelId);var targetId=CPQ.core.encodeId(csticId+".showFullLongText");var cpqAction;if($(targetId).val()!=="true"){$(targetId).val("true");cpqAction='SHOW_FULL_LONG_TEXT';$(e.currentTarget).next().show();}else{$(targetId).val("false");cpqAction='HIDE_FULL_LONG_TEXT';$(e.currentTarget).next().hide();}
csticId=CPQ.idhandler.getCsticIdFromConflictCstic(csticId);var data=CPQ.config.getSerializedConfigForm(cpqAction,csticId,false);CPQ.core.firePost(CPQ.config.doUpdatePost,[e,data]);},toggleMessageDetails:function(e){var linkId=$(e.currentTarget).attr('id');var csticId=CPQ.idhandler.getCsticIdFromMessageId(linkId);var targetId=CPQ.core.encodeId(csticId+".showExtendedMessage");if($(targetId).val()!=="true"){$(e.currentTarget).hide();$(e.currentTarget).next().show();}else{var extMessageElement=$(e.currentTarget).parent();extMessageElement.hide();extMessageElement.prev().show();}
var actionData=linkId+";"+$(e.currentTarget).attr('data-target');var data=CPQ.config.getSerializedConfigForm('TOGGLE_EXTENDED_MESSAGE',actionData,false);CPQ.core.firePost(CPQ.config.doUpdatePost,[e,data]);},previousNextButtonClicked:function(cpqAction,e){$("#autoExpand").val(false);var data=CPQ.config.getSerializedConfigForm(cpqAction,"",false);CPQ.core.firePost(CPQ.config.doUpdatePost,[e,data,"##first##"]);},handleConflictNavigation:function(getCsticIdFx,cpqAction,e){var csticFieldId=$(e.currentTarget).parent().attr("id");var csticId=getCsticIdFx.apply(this,[csticFieldId]);$("#autoExpand").val(false);var data=CPQ.config.getSerializedConfigForm(cpqAction,csticId,true,"");CPQ.core.firePost(CPQ.config.doUpdatePost,[e,data]);},handleRetractConflict:function(e){var csticFieldId=$(e.currentTarget).parent().attr("id");var csticId=CPQ.idhandler.getCsticIdFromCsticFieldId(csticFieldId);var targetId=CPQ.core.encodeId("conflict."+csticId
+".retractValue");var path=$(e.currentTarget).parents(".cpq-cstic").children("input:hidden").attr("name");$(targetId).val(true);var data=CPQ.config.getSerializedConfigForm("RETRACT_VALUE",path,false,"");CPQ.core.firePost(CPQ.config.doUpdatePost,[e,data]);},ensureMessagesAreVisible:function(){if($(".alert-info").length&&!conflicts){$(".alert-info").each(function(){if($(this).parent().attr("class")==="global-alerts"){$(document).scrollTop($(".alert-info").offset().top-10);return false;}});}},doAfterPost:function(){CPQ.config.registerOnClickHandlers();CPQ.config.registerAjax();if($("#focusId").attr("value").length>0){CPQ.focushandler.focusOnInputByCsticKey($("#focusId").attr("value"));$("#focusId").val("");}
CPQ.config.ensureMessagesAreVisible();CPQ.imagehandler.makeLabelsUnderImagesSameHeight('.cpq-csticValue','.cpq-csticValueImageLabel',true);CPQ.config.ifExpModeActive();},showVariantOverview:function(e){var sUrl=$(e.currentTarget).data("goToOverview");window.location=sUrl;},doUpdatePost:function(e,data,focusId){CPQ.core.configState++;CPQ.core.ajaxServerStartTime=new Date().getTime();$.post(CPQ.core.getPageUrl(),data,function(response){if(CPQ.core.ajaxRunCounter===1){CPQ.core.ajaxServerStopTime=new Date().getTime();if(CPQ.core.doRedirect(response)){return;}
var focusElementId;var scrollTo;var oldOffsetTop=0;if(focusId){focusElementId=focusId;scrollTo=true;}else{focusElementId=CPQ.focushandler.focusSave(e);if(focusElementId){scrollTo=false;oldOffsetTop=CPQ.config.getOffset(focusElementId);}else{focusElementId=e.target.id;scrollTo=false;oldOffsetTop=CPQ.config.getOffset(focusElementId);}}
CPQ.config.updateContent(response);CPQ.ddlbhandler.cpqDdlb();CPQ.variantsearchhandler.getSimilarVariants();CPQ.pricinghandler.getPricing();CPQ.analyticshandler.getAnalytics();CPQ.config.generateAriaDescribedBy();if(focusElementId==="##first##"){CPQ.focushandler.focusOnFirstInput();}else{CPQ.config.doScrolling(focusElementId,scrollTo,oldOffsetTop);}
CPQ.config.doAfterPost();CPQ.core.lastAjaxDone();restoreSummarySectionState();}
CPQ.core.ajaxRunning=false;CPQ.core.ajaxRunCounter--;});e.preventDefault();e.stopPropagation();},getOffset:function(focusElementId){var oldOffsetTop=0;if(focusElementId.length>0){var focusElement=$(CPQ.core.encodeId(focusElementId));if($(focusElement).offset()){oldOffsetTop=$(focusElement).offset().top
-$(document).scrollTop();}}
return oldOffsetTop;},doScrolling:function(focusElementId,scrollTo,oldOffsetTop){var newOffsetTop=oldOffsetTop;if(focusElementId.length>0&&!scrollTo){var elem=$(CPQ.core.encodeId(focusElementId));if(elem.length>0){newOffsetTop=elem.offset().top-$(document).scrollTop();}}
CPQ.focushandler.focusRestore(focusElementId,scrollTo,newOffsetTop
-oldOffsetTop);},getSerializedConfigForm:function(cpqAction,focusId,forceExpand,groupIdToToggle,groupIdToToggleInSpecTree){$("#cpqAction").val(cpqAction);$("#focusId").val(focusId);$("#forceExpand").val(forceExpand);$("#groupIdToToggle").val(groupIdToToggle);$("#groupIdToToggleInSpecTree").val(groupIdToToggleInSpecTree);var data=$("#configform").serialize();$("#cpqAction").val("");$("#focusId").val("");$("#forceExpand").val(false);$("#groupIdToToggle").val("");$("#groupIdToToggleInSpecTree").val("");return data;},updateContent:function(response){var analyticState,pricingState,varaiantSearchState;if($("#analyticsEnabled").text()==="true"){analyticState=CPQ.analyticshandler.storeAnalyticsState();}
if($("#asyncPricingMode").text()==="true"){pricingState=CPQ.pricinghandler.storePricingState();}
varaiantSearchState=CPQ.variantsearchhandler.storeVariantSearchState();CPQ.uihandler.updateSlotContent(response,"configContentSlot");if(analyticState){CPQ.analyticshandler.restoreAnalyticsState(analyticsState);}
if(pricingState){CPQ.pricinghandler.restoreValuePricingState(pricingState);}
CPQ.uihandler.updateSlotContent(response,"configSidebarSlot");CPQ.uihandler.updateSlotContent(response,"configBottombarSlot");if(pricingState){CPQ.pricinghandler.restorePriceSummaryState(pricingState);}
CPQ.variantsearchhandler.restoreVariantSearchState(varaiantSearchState);CPQ.uihandler.updateSlotContent(response,"cpq-message-area");CPQ.config.checkValueHasChanged();CPQ.config.generateAriaDescribedBy();},registerAjax:function(){$("#configform").submit(function(e){e.preventDefault();});$("#configform :input").on("change",function(e){CPQ.config.fireValueChangedPost(e);});$("#configform :input").keypress(function(e){if(e.which===13){CPQ.config.fireValueChangedPost(e);}});$(document).ajaxError(function(event,xhr){document.write(xhr.responseText);});},ifExpModeActive:function(){var result=new RegExp("expmode=true","i").exec(window.location.search);if(result===null){return;}
var selector="label.cpq-csticlabel, label.cpq-csticValueLabel, option.cpq-csticValue, img.cpq-cstic-value-image";$(selector).each(function(){var idSubstring=null;var elementId=$(this).attr("id");try{idSubstring=elementId.substring(0,elementId.lastIndexOf('.'));}catch(e){return;}
var tooltip=CPQ.config.getTooltipText(idSubstring);$(this).prop("title",tooltip);});},getTooltipText:function(idSubstring){return idSubstring.substring(idSubstring.length,idSubstring.lastIndexOf('.')+1);},checkValueHasChanged:function(){if(CPQ.config.lastTarget){var element=document.getElementById(CPQ.config.lastTarget.id);if(element===null||element.value!==CPQ.config.lastTarget.value||element.checked!==CPQ.config.lastTarget.checked){CPQ.config.lastTarget=null;}}},hasTargetChanged:function(e){if(!CPQ.config.lastTarget||e.target.id!==CPQ.config.lastTarget.id||e.target.value!==CPQ.config.lastTarget.value||e.target.checked!==CPQ.config.lastTarget.checked){CPQ.config.lastTarget=e.target;return true;}
return false;},fireValueChangedPost:function(e){if(CPQ.config.hasTargetChanged(e)){var path=$(e.currentTarget).parents(".cpq-cstic").children("input:hidden").attr("name");var data=CPQ.config.getSerializedConfigForm('VALUE_CHANGED',path,false,"");setTimeout(function(){CPQ.core.firePost(CPQ.config.doUpdatePost,[e,data]);},50);}else{e.preventDefault();e.stopImmediatePropagation();}},clickAddToCartButton:function(){setTimeout(function addToCartClicked(){var form=$("#configform")[0];form.setAttribute("action",CPQ.core.getAddToCartUrl());CPQ.core.firePost(function(){form.submit();});},100);},getDescriptionContext:function(messageFieldId,formElem){var prevContent=formElem.attr('aria-describedby');var newContent=messageFieldId;if(prevContent&&prevContent.indexOf(newContent)===-1){newContent=prevContent+" "+newContent;}
return newContent;},isElementCsticLabel:function(elem){return elem.length!==0&&elem[0].tagName.toLowerCase()==="label"&&$(elem).closest('div').attr('class').indexOf("cpq-label-config-link-row")!==-1;},generateAriaDescribedByForLabel:function(messageFieldId,csticId){var selector=CPQ.core.encodeId(csticId+".label");var formElem=$(selector);var newContent=CPQ.config.getDescriptionContext(messageFieldId,formElem);if(CPQ.config.isElementCsticLabel(formElem)){formElem.attr('aria-describedby',newContent);formElem.attr('tabindex',0);}},generateAriaDescribedByForInput:function(messageFieldId,csticId){var ddlbButton=csticId.substr(0,csticId.lastIndexOf("."));var selector=CPQ.core.encodeId(csticId+".inputNum")
+", "+CPQ.core.encodeId(csticId+".input")
+", "+CPQ.core.encodeId(csticId+".checkBoxList")
+", "+CPQ.core.encodeId(csticId+".checkBox")
+", "+CPQ.core.encodeId(ddlbButton+".ddlb-button");var formElem=$(selector);var newContent=CPQ.config.getDescriptionContext(messageFieldId,formElem);if(!formElem[0]){csticId=csticId.substr(0,csticId.lastIndexOf("."));var radioGroup=$(CPQ.core.encodeId(csticId
+".radioGroup"));formElem=radioGroup.find(":checked");if(!formElem[0]){formElem=radioGroup.find(".cpq-csticValueSelect-first");}}
formElem.attr('aria-describedby',newContent);},generateAriaDescribedBy:function(){$(".cpq-error, .cpq-conflict, .cpq-warning, .cpq-messages").each(function(){var messageFieldId=$(this).attr('id');var csticId=CPQ.idhandler.getCsticIdFromFieldGeneric(messageFieldId);CPQ.config.generateAriaDescribedByForLabel(messageFieldId,csticId);CPQ.config.generateAriaDescribedByForInput(messageFieldId,csticId);});},};$(document).ready(function(){if($("#dynamicConfigContent").length>0){CPQ.core.pageType="config";CPQ.core.formNameId="#configform";CPQ.config.bindAll();}});

CPQ.focushandler={focusOnFirstInput:function(){var csticKey=$(".cpq-groups label").attr("id");if(csticKey){csticKey=csticKey.substring(0,csticKey.length-6);var offset=$(".cpq-groups label").offset().top
-$(".cpq-groups").offset().top;CPQ.focushandler.focusOnInputByCsticKey(csticKey,offset);}},focusOnInputByCsticKey:function(csticKey,additionalOffset){var directNodeList=$(CPQ.core.encodeId(csticKey));if(directNodeList.length===1){CPQ.focushandler.focusSetEnsure(directNodeList,0);return;}
var csticLabelId=csticKey+".label";var csticKeyId=$(CPQ.core.encodeId(csticKey+".key"));var csticValueName=csticKeyId.attr("name");csticValueName=csticValueName.substring(0,csticValueName.length-4);csticValueName=csticValueName+".value";var nodeList=$("[name='"+csticValueName+"']");var length=nodeList.length;var focusElem;if(length>0){var checkedElem=nodeList.filter(':checked');if(checkedElem.length>0){focusElem=checkedElem.first();}else{focusElem=nodeList.first();if(focusElem.hasClass('cpq-ddlb')){focusElem=focusElem.parent().find(".ui-selectmenu-button");}}}else{var firstCheckboxName=csticValueName.slice(0,csticValueName.length-5);firstCheckboxName+="domainvalues[0].selected";nodeList=$("[name='"+firstCheckboxName+"']").filter(':visible');length=nodeList.length;if(length>0){focusElem=$(nodeList[0],csticLabelId);}else{var retractValue=$(CPQ.core.encodeId(csticKey+".readOnly")).next().filter('.cpq-conflict-retractValue').find('a');if(retractValue.length>0){focusElem=retractValue.first();}else{focusElem=$(CPQ.core.encodeId(csticLabelId));}}}
var scrollToElem;var label=$(CPQ.core.encodeId(csticLabelId)).first();var conflictsOffset=0;if(!additionalOffset){additionalOffset=0;}
if('conflict'===csticKey.substring(0,8)){scrollToElem=label.parents('.cpq-group').prev();additionalOffset=0;conflictsOffset=15;}else{scrollToElem=label;}
var offset=additionalOffset+conflictsOffset+focusElem.offset().top-scrollToElem.offset().top;CPQ.focushandler.focusRestoreOnElement(focusElem,true,offset);},focusRestore:function(focusElementId,srollTo,additionalOffset){if(focusElementId&&focusElementId.length>0){var focusElement=$(CPQ.core.encodeId(focusElementId));CPQ.focushandler.focusRestoreOnElement(focusElement,srollTo,additionalOffset);}},focusSave:function(){var id=undefined;if(document.activeElement){id=document.activeElement.id;}
return id;},focusRestoreOnElement:function(focusElement,srollTo,additionalOffset){if(focusElement[0]){var actualScrollTop=$(window).scrollTop();CPQ.focushandler.focusSetEnsure(focusElement,0);if(srollTo){var offset=focusElement.offset().top;var stickyBanner=$(".stickyBranding");var stickyBannerHeight=0;if(stickyBanner.is(":visible")){stickyBannerHeight=stickyBanner.outerHeight();}
if(!additionalOffset){additionalOffset=0;}
offset=offset-stickyBannerHeight-additionalOffset;$("html, body").animate({scrollTop:offset},100);}else if(additionalOffset&&additionalOffset!==0){var newScrollTop=actualScrollTop+additionalOffset;$(window).scrollTop(newScrollTop);}}},focusSetEnsure:function(focusElement,counter){focusElement.focus();if(!focusElement.is(":focus")&&counter<20){counter++;setTimeout(function(){counter++;CPQ.focushandler.focusSetEnsure(focusElement,counter);},50);}},hoverOrFocusOnValueImage:function(elem){if(CPQ.config.valueChangeViaImage){CPQ.config.valueChangeViaImage=false;}else{elem.addClass("cpq-cstic-value-image-container-hover");}},hoverLostOrBlurOnVlaueImage:function(elem){elem.removeClass("cpq-cstic-value-image-container-hover");CPQ.config.valueChangeViaImage=false;}};

CPQ.menuhandler={menuOpen:function(e){var sideBar=$("#configSidebarSlot").parent();sideBar.removeClass("hidden-xs hidden-sm");var menu=$("#cpqMenuArea");menu.addClass("hidden-xs hidden-sm");var config=$("#configContentSlot").parent();config.addClass("hidden-xs hidden-sm");config.removeClass("col-xs-12 col-sm-12");$(".main-footer").removeClass("hidden-xs hidden-sm");$(".main-header").removeClass("hidden-xs hidden-sm");$(".product-details-header").removeClass("hidden-xs hidden-sm");$(".main-footer").addClass("hidden-xs hidden-sm");$(".main-header").addClass("hidden-xs hidden-sm");$("#product-details-header").addClass("hidden-xs hidden-sm");CPQ.focushandler.focusRestore($(".cpq-menu-leaf-selected").attr("id"),true,$(window).height()/4);e.preventDefault();e.stopPropagation();},menuRemove:function(){var sideBar=$("#configSidebarSlot").parent();sideBar.addClass("hidden-xs hidden-sm");var menu=$("#cpqMenuArea");menu.removeClass("hidden-xs hidden-sm");var config=$("#configContentSlot").parent();config.removeClass("hidden-xs hidden-sm");config.addClass("col-xs-12 col-sm-12");$(".main-footer").removeClass("hidden-xs hidden-sm");$(".main-header").removeClass("hidden-xs hidden-sm");$("#product-details-header").removeClass("hidden-xs hidden-sm");},menuClose:function(e){CPQ.menuhandler.menuRemove();CPQ.focushandler.focusOnFirstInput();e.preventDefault();e.stopPropagation();},menuGroupToggle:function(e){var menuNodeId=$(e.currentTarget).attr("id");var nodeId=CPQ.idhandler.getGroupIdFromMenuNodeId(menuNodeId);$("#autoExpand").val(false);var data=CPQ.config.getSerializedConfigForm("MENU_NAVIGATION","",false,"",nodeId);CPQ.core.firePost(CPQ.config.doUpdatePost,[e,data]);},menuNavigation:function(e){var menuNodeId=$(e.currentTarget).attr("id");var nodeId=CPQ.idhandler.getGroupIdFromMenuNodeId(menuNodeId);$("#groupIdToDisplay").val(nodeId);var data=CPQ.config.getSerializedConfigForm("MENU_NAVIGATION","",true,nodeId);CPQ.core.firePost(CPQ.config.doUpdatePost,[e,data,"##first##"]);CPQ.menuhandler.menuRemove();}};

CPQ.imagehandler={makeLabelsUnderImagesSameHeight:function(containerClass,labelClass,newLineCheck){$(containerClass).each(function(){var maxHeight=0;var lastYOffSet=0;var actualLine=[];var imagesOfCstic=$(this).find(labelClass);imagesOfCstic.height('auto');imagesOfCstic.each(function(){var actualHeight=$(this).height();var actualOffSet=$(this).offset().top;if(lastYOffSet===0){lastYOffSet=actualOffSet;maxHeight=actualHeight;}else if(newLineCheck&&lastYOffSet!==actualOffSet){$(actualLine).height(maxHeight);maxHeight=actualHeight;lastYOffSet=actualOffSet;actualLine=[];}else if(actualHeight>maxHeight){maxHeight=actualHeight;}
actualLine.push(this);});if(actualLine.length>0){$(actualLine).height(maxHeight);actualLine=[];}});},checkValueImageClicked:function(elem){if(elem.hasClass("cpq-cstic-value-image")||elem.find(".cpq-cstic-value-image").length>0){CPQ.config.valueChangeViaImage=true;}},csticValueImageMultiClicked:function(e){CPQ.imagehandler.checkValueImageClicked($(e.target));var containerId=$(e.currentTarget).attr('id');var csticValueIdInput=containerId.substring(0,containerId.length-10)
+".checkBoxWithImage";var input=$(CPQ.core.encodeId(csticValueIdInput));if(input.val()==="true"){input.val("false");}else{input.val("true");}
var cpqAction="VALUE_CHANGED";var path=input.attr('name');var data=CPQ.config.getSerializedConfigForm(cpqAction,path,false);CPQ.core.firePost(CPQ.config.doUpdatePost,[e,data]);},csticValueImageSingleClicked:function(e){CPQ.imagehandler.checkValueImageClicked($(e.target));var containerId=$(e.currentTarget).attr('id');var csticValueNameId=containerId.substring(0,containerId.length-10)
+".valueName";var csticValueNameDiv=$(CPQ.core.encodeId(csticValueNameId));var csticValueName=csticValueNameDiv.text();var imageGroupId=csticValueNameDiv.parent().attr('id');var inputId=imageGroupId.substring(0,imageGroupId.length-20)
+".radioButtonWithImage";var input=$(CPQ.core.encodeId(inputId));input.val(csticValueName);var cpqAction="VALUE_CHANGED";var path=input.attr('name');var data=CPQ.config.getSerializedConfigForm(cpqAction,path,false);CPQ.core.firePost(CPQ.config.doUpdatePost,[e,data]);},updateVariantImageHeight:function(counter){$(".cpq-vc-imgContainer").css("line-height","0px");$(".cpq-vc-imgContainer").css("height","auto");var maxImageHeight=Math.max.apply(null,$(".cpq-vc-imgContainer").map(function(){return $(this).height();}).get());if(maxImageHeight>1){$(".cpq-vc-imgContainer").css("height",maxImageHeight+"px");$(".cpq-vc-imgContainer").css("line-height",maxImageHeight+"px");}else{if(undefined===counter){setTimeout(function(){CPQ.imagehandler.updateVariantImageHeight(1);},50);}else{counter++;if(counter<10){setTimeout(function(){CPQ.imagehandler.updateVariantImageHeight(counter);},50);}}}},clickHideShowImageGallery:function(postFx,e){var element=$("#productName");var imageComponent=$("#configImage");CPQ.uihandler.toggleExpandCollapseStyle(element,imageComponent,"product-details-glyphicon-chevron");$("#cpqAction").val("TOGGLE_IMAGE_GALLERY");var data=$(CPQ.core.formNameId).serialize();CPQ.core.firePost(postFx,[e,data]);}};

CPQ.pricinghandler={getPricing:function(){if($("#asyncPricingMode").text()==="true"){var ret=CPQ.core.prepareAsyncServiceCall();$.post(CPQ.core.getPricingUrl(),ret.data,function(response){if(CPQ.core.ajaxRunCounterAsyncServices===1){CPQ.core.ajaxServerStopTimeAsyncServices=new Date().getTime();}
if(ret.configState===CPQ.core.configState){CPQ.pricinghandler.updateValuePrices(response);CPQ.pricinghandler.updatePriceSummary(response);}
CPQ.core.ajaxRunCounterAsyncServices--;if(CPQ.core.ajaxRunCounterAsyncServices===0){CPQ.core.ajaxStopTimeAsyncServices=new Date().getTime();}});}},updatePriceSummary:function(data){clearTimeout(CPQ.core.priceSummaryDropHandle);var obj=$.parseJSON(data);if(obj.pricingError){$(".cpq-pricing-summary-error").slideDown(300,function(){$(".cpq-pricing-summary-error").attr('role','alert');});}else if($(".cpq-pricing-summary-error").is(":visible")){$(".cpq-pricing-summary-error").removeAttr('role');$(".cpq-pricing-summary-error").slideUp(300);}
$("#basePriceValue").html(obj.basePriceValue);$("#basePriceValue").attr("title",obj.basePriceValue);$("#selectedOptionsValue").html(obj.selectedOptionsValue);$("#selectedOptionsValue").attr("title",obj.selectedOptionsValue);$("#currentTotalValue").html(obj.currentTotalValue);$("#currentTotalValue").attr("title",obj.currentTotalValue);if(obj.currentTotalSavings!=='-'){$("#savingsValue").html(obj.currentTotalSavings);$("#savingsValue").attr("title",obj.currentTotalSavings);$("#savings").show();}else{$("#savings").hide();}},updateValuePrices:function(data){clearTimeout(CPQ.core.valuePriceDropHandle);clearTimeout(CPQ.core.valuePriceDropdownDropHandle);var obj=$.parseJSON(data);for(var i=0;i<obj.valuePricesArray.length;i++){var cstic=obj.valuePricesArray[i];var csticKey=cstic.csticKey;var showDeltaPrices=cstic.showDeltaPrices;var selectedValue=$(CPQ.core.encodeId(csticKey+".ddlb")).val();for(var j=0;j<cstic.csticValuesArray.length;j++){var csticValue=cstic.csticValuesArray[j];var csticValueKey=csticValue.csticValueKey;var idHeader=csticKey+"."+csticValueKey;var csticValueOption=idHeader+".option";var csticValueLabel=idHeader+".label";var csticCheckboxId=csticKey+".checkBox";var elementId=idHeader+".valuePrice";var elementCheckBoxId=csticKey+".valuePrice";var strikeThroughElementId=idHeader+".strikeThroughPrice";var strikeThroughElementCheckBoxId=csticKey
+".strikeThroughPrice";var valuePriceStyle="cpq-csticValueDeltaPrice";if(csticValue.valueObsoletePrice!==""&&!showDeltaPrices){valuePriceStyle+=" cpq-price-savings";}
var obsoletePriceStyle="cpq-csticValueStrikeThroughPrice";if(showDeltaPrices){obsoletePriceStyle+=" cpq-price-savings";}
CPQ.pricinghandler.setValuePrice(csticValueLabel,$(CPQ.core.encodeId(csticValueLabel)),elementId,valuePriceStyle,csticValue.valuePrice,true);CPQ.pricinghandler.setValuePrice(csticCheckboxId,$(CPQ.core.encodeId(csticCheckboxId)),elementCheckBoxId,valuePriceStyle,csticValue.valuePrice,true);CPQ.pricinghandler.setValuePrice(csticValueLabel,$(CPQ.core.encodeId(csticValueLabel)),strikeThroughElementId,obsoletePriceStyle,csticValue.valueObsoletePrice,!showDeltaPrices);CPQ.pricinghandler.setValuePrice(csticCheckboxId,$(CPQ.core.encodeId(csticCheckboxId)),strikeThroughElementCheckBoxId,obsoletePriceStyle,csticValue.valueObsoletePrice,!showDeltaPrices);CPQ.pricinghandler.setValuePriceForDropDown($(CPQ.core.encodeId(csticValueOption)),csticValue.valuePrice,csticValue.valueObsoletePrice,selectedValue,showDeltaPrices);CPQ.pricinghandler.setValueStyleForDropDown($(CPQ.core.encodeId(csticValueOption)),csticValue.valueObsoletePrice);var conflictCsticValueLabel='conflict.'+csticValueLabel;var conflictElementId='conflict.'+elementId;var conflictStrikeThroughElementId='conflict.'+strikeThroughElementId;CPQ.pricinghandler.setValuePrice(conflictCsticValueLabel,$(CPQ.core.encodeId(conflictCsticValueLabel)),conflictElementId,valuePriceStyle,csticValue.valuePrice,true);CPQ.pricinghandler.setValuePrice(conflictCsticValueLabel,$(CPQ.core.encodeId(conflictCsticValueLabel)),conflictStrikeThroughElementId,obsoletePriceStyle,csticValue.valueObsoletePrice,!showDeltaPrices);$(".cpq-ddlb").ddlbselectmenu().each(function(){$(this).ddlbselectmenu("refresh");});CPQ.config.generateAriaDescribedBy();}}},setValuePriceForDropDown:function(csticValue,valuePrice,valueObsoletePrice,selectedValue,showDeltaPrices){if(csticValue.length>0){valuePrice=CPQ.pricinghandler.addPlusIfRequired(valuePrice);if(!showDeltaPrices){valueObsoletePrice=CPQ.pricinghandler.addPlusIfRequired(valueObsoletePrice);}
csticValue.attr("data-price",valuePrice);csticValue.attr("data-obsolete-price",valueObsoletePrice);}},setValueStyleForDropDown:function(csticValue,valueObsoletePrice){if(csticValue.length>0&&valueObsoletePrice.length>0){csticValue.attr("data-promostyle","cpq-promo-applied");}else if(csticValue.length>0){csticValue.attr("data-promostyle","");}},addPlusIfRequired:function(price){if(!price.startsWith("-")&&price.match(/\d+/g)!=null){price="+"+price;}
return price;},setValuePrice:function(csticValueLabel,csticValueByLabel,elementId,csticValuePriceStyle,valuePrice,addPlus){if(csticValueByLabel.length>0){if(addPlus){valuePrice=CPQ.pricinghandler.addPlusIfRequired(valuePrice);}
var html="<div id='"+elementId+"' class=' "
+csticValuePriceStyle+" cpq-csticValueLabel' title='"
+valuePrice+"'>"+valuePrice+"</div>";$(CPQ.core.encodeId(elementId)).remove();var label=$(CPQ.core.encodeId(csticValueLabel));if(label.next().length===0){label.after('<div class="cpq-valuePrices"/>');}
label.next().append(html);}},storePricingState:function(){var state={};var saveCallBack=function(obj,item){item.labelId=obj.parent().children('label').attr('id');item.html=obj.wrap('<p/>').parent().html();};state.valuePriceState=CPQ.uihandler.storeState('.cpq-valuePrices',saveCallBack);state.pricingSummary=CPQ.uihandler.storeState('#basePriceValue, #currentTotalValue, #savingsValue, #selectedOptionsValue');return state;},restoreValuePricingState:function(state){if(state.valuePriceState){var restoreCallBack=function(item){var label=$(CPQ.core.encodeId(item.labelId));label.after(item.html);};CPQ.uihandler.restoreState(state.valuePriceState,restoreCallBack);CPQ.core.valuePriceDropHandle=setTimeout(function(){$('.cpq-valuePrices').remove();},250);}},restorePriceSummaryState:function(state){CPQ.uihandler.restoreState(state.pricingSummary);CPQ.core.priceSummaryDropHandle=setTimeout(function(){var selector="#basePriceValue, #currentTotalValue, #savingsValue, #selectedOptionsValue";$(selector).text('-');$(selector).prop('title','-');},250);}};

CPQ.analyticshandler={init:function(){CPQ.analyticshandler.USER_CAN_TOUCH=(('ontouchstart'in window)||(navigator.msMaxTouchPoints>0));window.addEventListener('mouseover',function onFirstHover(){CPQ.analyticshandler.USER_CAN_HOVER=true;window.removeEventListener('mouseover',onFirstHover,false);},false);},storeAnalyticsState:function(){CPQ.uihandler.storeState('.cpq-csticValueAnalytics');},restoreAnalyticsState:function(analyticState){CPQ.uihandler.restoreState(analyticState,function(item){var div=$(CPQ.core.encodeId(item.id));if(div.length>0){div.html(item.html);div.removeClass('cpq-csticValueAnalyticsTemplate').addClass('cpq-csticValueAnalytics');}});},getAnalytics:function(){if($("#analyticsEnabled").text()==="true"){var ret=CPQ.core.prepareAsyncServiceCall();$.post(CPQ.core.getAnalyticsUrl(),ret.data,function(response){if(CPQ.core.ajaxRunCounterAsyncServices===1){CPQ.core.ajaxServerStopTimeAsyncServices=new Date().getTime();}
if(ret.configState===CPQ.core.configState){CPQ.analyticshandler.insertAnalyticValues(response);}
CPQ.core.ajaxRunCounterAsyncServices--;if(CPQ.core.ajaxRunCounterAsyncServices===0){CPQ.core.ajaxStopTimeAsyncServices=new Date().getTime();}});}},replaceAnalyticValues:function(obj,uiKey,analyticValue){var uiValueKey=uiKey+'.'+analyticValue.csticValueName;var analyticsDiv=$(CPQ.core.encodeId(uiValueKey+'.analytics'));if(analyticsDiv.length<=0){return;}
var popularityTooltipSpan=$(CPQ.core.encodeId(uiValueKey
+'.popularityTooltip'));var popularityInPercentSpan=$(CPQ.core.encodeId(uiValueKey
+'.popularityInPercent'));var popularityAriaText=$(CPQ.core.encodeId(uiValueKey
+'.popularityAriaText'));popularityTooltipSpan.attr("title",(popularityTooltipSpan.attr("title").replace(obj.popularityInPercent.placeHolder,analyticValue.popularityInPercent)));popularityInPercentSpan.html(popularityInPercentSpan.html().replace(obj.popularityInPercent.placeHolder,analyticValue.popularityInPercent));popularityAriaText.html(popularityAriaText.html().replace(obj.popularityInPercent.placeHolder,analyticValue.popularityInPercent));analyticsDiv.removeClass('cpq-csticValueAnalyticsTemplate').addClass('cpq-csticValueAnalytics');if(popularityAriaText.html().startsWith(popularityInPercentSpan.html())){popularityAriaText.html(popularityAriaText.html().replace(popularityInPercentSpan.html(),""));}},insertAnalyticValues:function(reposnse){var obj=$.parseJSON(reposnse);for(var ii=0,lenII=obj.analyticCstics.length;ii<lenII;++ii){var analyticCstic=obj.analyticCstics[ii];var uiKey=analyticCstic.csticUiKey;if($(CPQ.core.encodeId(uiKey+'.key')).length===0){continue;}
for(var jj=0,lenJJ=analyticCstic.analyticValues.length;jj<lenJJ;++jj){CPQ.analyticshandler.replaceAnalyticValues(obj,uiKey,analyticCstic.analyticValues[jj]);}}
CPQ.imagehandler.makeLabelsUnderImagesSameHeight('.cpq-csticValue','.cpq-csticValueImageLabel',true);},registerAnalyticsTooltip:function(){$(".cpq-label-default").click(function(e){var mobileTooltip=$(this).find(".mobileTooltip");if(!mobileTooltip.length){if(!CPQ.analyticshandler.USER_CAN_HOVER||CPQ.analyticshandler.USER_CAN_TOUCH){$(".mobileTooltip").remove();CPQ.analyticshandler.removeDefaultToolTip();var style="";var positionToElem=$(this).closest(".cpq-csticValue").find(".cpq-cstic-value-with-image");if(positionToElem[0]){var actualElem=$(this).closest(".cpq-cstic-value-with-image");var left=-15+actualElem.offset().left
-positionToElem.offset().left;var top=175+actualElem.offset().top
-positionToElem.offset().top;style=' style="left:'+left+'px; top:'
+top+'px"';}
$(this).append('<span class="mobileTooltip"'+style+'>'
+$(this).attr("title-data")
+'</span>');e.preventDefault();e.stopPropagation();}}else{mobileTooltip.remove();e.preventDefault();e.stopPropagation();}});$(document).click(function(e){$(".mobileTooltip").remove();});$(".cpq-label-default").mouseover(function(e){CPQ.analyticshandler.restoreDefaultToolTip();$(".mobileTooltip").remove();});},removeDefaultToolTip:function(){$(".cpq-label-default").each(function(){if(!$(this).attr("title-data")){$(this).attr("title-data",$(this).attr("title"));$(this).removeAttr("title");}});},restoreDefaultToolTip:function(){$(".cpq-label-default").each(function(){if(!$(this).attr("title")){$(this).attr("title",$(this).attr("title-data"));$(this).removeAttr("title-data");}});}};

CPQ.ddlbhandler={cpqDdlb:function(){$.widget("config.ddlbselectmenu",$.ui.selectmenu,{_renderItem:function(ul,item){var wrapper=CPQ.ddlbhandler.createLineItemForCpqDdlb(item);var li=$("<li>");return li.append(wrapper).appendTo(ul);},_resizeMenu:function(){var width=this.button.outerWidth();this.menu.outerWidth(width);},_renderButtonItem:function(item){var optionId=CPQ.idhandler.getIdFromDDLB(item.element[0].id);var wrapper=CPQ.ddlbhandler.createLineItemForCpqDdlb(item,true);wrapper.addClass("cpq-csticValue");var ddlbOptionId=optionId.concat(".ddlbOption");wrapper.attr("id",ddlbOptionId);CPQ.ddlbhandler.generateDDLBAriaLabelledBy(this.button,optionId);return wrapper;}});$(".cpq-ddlb").ddlbselectmenu().each(function(){$(this).ddlbselectmenu("menuWidget").addClass("cpq-ddlb-option");});$(".cpq-ddlb").ddlbselectmenu({change:function(event,ui){var path=ui.item.element[0].parentElement.getAttribute("name");var data=CPQ.config.getSerializedConfigForm('VALUE_CHANGED',path,false,"");CPQ.core.firePost(CPQ.config.doUpdatePost,[event,data]);}});},createLineItemForCpqDdlb:function(item,withIcon){var optionId=CPQ.idhandler.getIdFromDDLB(item.element[0].id);var wrapper=$("<div>");var styleClass=item.element.attr("data-promostyle");if(styleClass){wrapper.addClass(styleClass);}
var obsoletePriceStyle=item.element.attr("data-isdeltaprice")==="true"?"cpq-option-savings":"cpq-option-strikethrough";$("<span>",{text:item.label,"class":"cpq-option-text"}).appendTo(wrapper);var priceWrapper=$("<span>",{"class":"cpq-valuePrices"}).appendTo(wrapper);$("<span>",{text:item.element.attr("data-price"),"id":optionId.concat(".valuePrice"),"class":"cpq-option-price"}).appendTo(priceWrapper);$("<span>",{text:item.element.attr("data-obsolete-price"),"id":optionId.concat(".strikeThroughPrice"),"class":obsoletePriceStyle}).appendTo(priceWrapper);if(withIcon){$("<span>",{"class":"cpq-option-icon"}).appendTo(wrapper);}
wrapper.addClass(styleClass);return wrapper;},generateDDLBAriaLabelledBy:function(button,optionId){var labelId=CPQ.idhandler.getIdFromDDLB(optionId).concat(".label");var ddlbOptionId=optionId.concat(".ddlbOption");var valuePrice=optionId.concat(".valuePrice");var strikeThroughPrice=optionId.concat(".strikeThroughPrice");var labelledby=labelId.concat(" ",ddlbOptionId);labelledby=labelledby.concat(" ",strikeThroughPrice);labelledby=labelledby.concat(" ",valuePrice);button.attr("aria-labelledby",labelledby);},refreshCpqDdlb:function(){$(".cpq-ddlb").ddlbselectmenu().each(function(){$(this).ddlbselectmenu("refresh");});}};

CPQ.variantsearchhandler={getSimilarVariants:function(){if($('#configVariantSearchResults').length>0){CPQ.core.ajaxRunCounterAsyncServices++;if(CPQ.core.ajaxRunCounterAsyncServices===1){CPQ.core.ajaxStartTimeAsyncServices=new Date().getTime();}
CPQ.config.variantSearchAbortHanlder=function(){if(navigator.userAgent.indexOf("Firefox")>-1){$.ajax().abort();}};$(window).bind('beforeunload',CPQ.config.variantSearchAbortHanlder);var data="configId="+$('#configId').val()+"&productCode="
+$(CPQ.core.encodeId('kbKey.productCode')).val();if(CPQ.core.ajaxRunCounterAsyncServices===1){CPQ.core.ajaxServerStartTimeAsyncServices=new Date().getTime();}
$.post(CPQ.core.getVaraiantSearchUrl(),data,function(response){if(CPQ.core.ajaxRunCounterAsyncServices===1){CPQ.core.ajaxServerStopTimeAsyncServices=new Date().getTime();}
CPQ.uihandler.updateSlotContent(response,"configVariantSearchResults");$(window).unbind('beforeunload',CPQ.config.variantSearchAbortHanlder);CPQ.config.variantSearchAbortHanlder=undefined;$("#cpqVariantCarousel").owlCarousel({navigation:true,navigationText:["<span class='glyphicon glyphicon-chevron-left'></span>","<span class='glyphicon glyphicon-chevron-right'></span>"],pagination:false,responsiveBaseWidth:'.cpq-vc-container',afterAction:function(){CPQ.imagehandler.makeLabelsUnderImagesSameHeight('.cpq-vc-container','.cpq-vc-name',false);CPQ.imagehandler.updateVariantImageHeight();}});CPQ.variantsearchhandler.registerVariantListOnClickHandlers();CPQ.core.ajaxRunCounterAsyncServices--;if(CPQ.core.ajaxRunCounterAsyncServices===0){CPQ.core.ajaxStopTimeAsyncServices=new Date().getTime();}});}},registerVariantListOnClickHandlers:function(){$(".cpq-vc-viewDetails-btn").on("click",function(e){CPQ.config.showVariantOverview(e);});},storeVariantSearchState:function(){return CPQ.uihandler.storeState('#configVariantSearchResults');},restoreVariantSearchState:function(state){CPQ.uihandler.restoreState(state);}};

ACC.obcomplaints={$complaintsPopupButton:$('a.ob-complaints-popup-btn, button.ob-complaints-popup-btn'),$complaintsReturnButton:$('a.ob-complaints-return-btn, button.ob-complaints-return-btn'),requestCompleted:false,bindInitial:function(){ACC.obcomplaints.$complaintsPopupButton.each(function(){ACC.obcomplaints.showComplaintsReturnSelectionPopup($(this));});},showBusy:function(){if($('body').children('.isloading-overlay').length<1){$.isLoading({class:"fa fa-spinner fa-spin fa-3x fa-fw"});}},hideBusy:function(){$.isLoading("hide");},showComplaintsReturnSelectionPopup:function($elem){$elem.click(function(){ACC.obcomplaints.showBusy();ACC.obcomplaints.requestCompleted=false;var url=$elem.data('returmformurl');$.get(url,undefined,undefined,'html').done(function(data){$('#returnFormHolder').html(data.toString());ACC.obreturns.rebindTags();ACC.obreturns.bindAll();ACC.obcomplaints.hideBusy();});var url=$elem.data('url');$.get(url,undefined,undefined,'html').done(function(data){var responseText=data.toString();ACC.colorbox.open("  ",{html:responseText,height:600,width:650,onComplete:function(){ACC.obcomplaints.setupBoxTitle();$(this).colorbox.resize();ACC.common.refreshScreenReaderBuffer();$('a.ob-complaints-btn, button.ob-complaints-btn').each(function(){ACC.obcomplaints.showComplaintsEntrySelectionPopup($(this));});ACC.obreturns.rebindTags();ACC.obreturns.bindAll();ACC.obcomplaints.hideBusy();}});}).fail(function(){ACC.obcomplaints.showGeneralError();});});},showComplaintsEntrySelectionPopup:function($elem){$elem.click(function(){ACC.obcomplaints.showBusy();var url=$elem.data('url');$.get(url,undefined,undefined,'html').done(function(data){ACC.obcomplaints.hideBusy();var responseText=data.toString();ACC.colorbox.open("  ",{html:responseText,height:600,width:900,onComplete:function(){ACC.obcomplaints.setupBoxTitle();$(this).colorbox.resize();ACC.common.refreshScreenReaderBuffer();$('a.ob-complaints-entry-select-popup-btn, button.ob-complaints-entry-select-popup-btn').each(function(){ACC.obcomplaints.showComplaintsPersonalDataPopup($(this));});}});}).fail(function(){ACC.obcomplaints.showGeneralError();});});},showComplaintsPersonalDataPopup:function($elem){$elem.click(function(){ACC.obcomplaints.showBusy();var url=$elem.data('url');$.get(url,undefined,undefined,'html').done(function(data){ACC.obcomplaints.hideBusy();var responseText=data.toString();ACC.colorbox.open("  ",{html:responseText,height:600,width:900,onComplete:function(){ACC.obcomplaints.setupBoxTitle();$(this).colorbox.resize();ACC.common.refreshScreenReaderBuffer();$(".withDatepicker").datepicker({dateFormat:$(".withDatepicker").data("dateformat"),maxDate:new Date()});$('.ob-complaints-cancel-popup-btn').click(function(){ACC.colorbox.close();});$('a.ob-complaints-previous-popup-btn, button.ob-complaints-previous-popup-btn').each(function(){ACC.obcomplaints.showComplaintsEntrySelectionPopup($(this));});$('#complaintsPersonalDataForm').submit(function(e){e.preventDefault();ACC.obcomplaints.submitAndShowComplaintsInterfaceXPopup($(this));});}});}).fail(function(){ACC.obcomplaints.showGeneralError();});});},submitAndShowComplaintsInterfaceXPopup:function($elem){ACC.obcomplaints.showBusy();var url=$elem.attr('action');var formElements=$elem.serialize();$.post(url,formElements,function(response){ACC.obcomplaints.hideBusy();ACC.colorbox.open(" ",{html:response.toString(),height:600,width:900,onComplete:function(){ACC.obcomplaints.setupBoxTitle();$(this).colorbox.resize();ACC.common.refreshScreenReaderBuffer();$('input[data-type="toggleInterface1"]').change(function($elem){ACC.obcomplaints.toggleDisplayAreasInterface1($(this));});$('input[data-type="toggleInterface2"]').change(function($elem){ACC.obcomplaints.toggleDisplayAreasInterface2($(this));});$('input[data-type="toggleInterface3"]').change(function($elem){ACC.obcomplaints.toggleDisplayAreasInterface3($(this));});$(".withDatepicker").datepicker({dateFormat:$(".withDatepicker").data("dateformat"),minDate:new Date()});$('.ob-complaints-cancel-popup-btn').click(function(){ACC.colorbox.close();});$('a.ob-complaints-previous-popup-btn, button.ob-complaints-previous-popup-btn').each(function(){ACC.obcomplaints.showComplaintsPersonalDataPopup($(this));});$('#complaintsInterfaceForm').submit(function(e){e.preventDefault();ACC.obcomplaints.submitAndShowComplaintsEndMessagePopup($(this));});}});}).fail(function(){ACC.obcomplaints.showGeneralError();});},submitAndShowComplaintsEndMessagePopup:function($elem){ACC.obcomplaints.showBusy();var url=$elem.attr('action');var formdata=false;if(window.FormData){formdata=new FormData($elem[0]);}
var formAction=$elem.attr('action');$.ajax({url:url,data:formdata?formdata:$elem.serialize(),cache:false,contentType:false,processData:false,type:'POST',success:function(response,textStatus,jqXHR){ACC.obcomplaints.hideBusy();ACC.colorbox.open(" ",{html:response.toString(),height:600,width:900,onComplete:function(){ACC.obcomplaints.setupBoxTitle();$(this).colorbox.resize();ACC.common.refreshScreenReaderBuffer();$('input[data-type="toggleInterface1"]').change(function($elem){ACC.obcomplaints.toggleDisplayAreasInterface1($(this));});$('input[data-type="toggleInterface2"]').change(function($elem){ACC.obcomplaints.toggleDisplayAreasInterface2($(this));});$('input[data-type="toggleInterface3"]').change(function($elem){ACC.obcomplaints.toggleDisplayAreasInterface3($(this));});$('input[data-type="toggleInterface1"]').each(function($elem){ACC.obcomplaints.toggleDisplayAreasInterface1($(this));});$('input[data-type="toggleInterface2"]').each(function($elem){ACC.obcomplaints.toggleDisplayAreasInterface2($(this));});$('input[data-type="toggleInterface3"]').each(function($elem){ACC.obcomplaints.toggleDisplayAreasInterface3($(this));});$('.ob-complaints-cancel-popup-btn').click(function(){ACC.colorbox.close();});$('a.ob-complaints-previous-popup-btn, button.ob-complaints-previous-popup-btn').each(function(){ACC.obcomplaints.showComplaintsPersonalDataPopup($(this));});$('#complaintsInterfaceForm').submit(function(e){e.preventDefault();ACC.obcomplaints.submitAndShowComplaintsEndMessagePopup($(this));});}});},error:function(response,status,error){ACC.obcomplaints.showGeneralError();}});},toggleDisplayAreasInterface1:function($elem){var value=$elem.val();var name=$elem.attr('name');if(name=="returnStatus"){if(value==1){$('#fileUploadArea').show();$('#pickupServiceArea').hide();$('#files')[0].setAttribute("required","required");$('#pickupService')[0].removeAttribute("required");}else{$('#fileUploadArea').hide();$('#pickupServiceArea').show();$('#files')[0].removeAttribute("required");$('#pickupService')[0].setAttribute("required","required");}}
if(name=="pickupService"){var contactPerson=document.getElementById("pickupContactPersonName");var pickupDate=document.getElementById("pickupDate");var emailLabel=document.getElementById("pickupEmail");pickupDate.removeAttribute("required");contactPerson.removeAttribute("required");emailLabel.removeAttribute("required");if(value==3){$('#pickupServiceContact').show();$('#pickupServiceMail').hide();contactPerson.setAttribute("required","required");pickupDate.setAttribute("required","required");}else if(value==9){$('#pickupServiceContact').show();$('#pickupServiceMail').show();contactPerson.setAttribute("required","required");pickupDate.setAttribute("required","required");emailLabel.setAttribute("required","required");}else if(value==0){$('#pickupServiceContact').hide();$('#pickupServiceMail').hide();}}},toggleDisplayAreasInterface2:function($elem){var value=$elem.val();var name=$elem.attr('name');if(name=="loanItems"){if(ACC.obcomplaints.isOneChecked(name)){$('#loanOptionArea').show();$('#loanDeliveryDate')[0].setAttribute("required","required");$('#longTextLoan')[0].setAttribute("required","required");}else{$('#loanOptionArea').hide();$('#loanDeliveryDate')[0].removeAttribute("required");$('#longTextLoan')[0].removeAttribute("required");}}
if(name=="returnStatus"){$('#loanOptionArea').hide();$('#loanOptionCheckBox').attr('checked',false);if(value==2){ACC.obcomplaints.doAnAllInputs("loanItems",function(elem){$jqElem=$(elem);$jqElem.attr('disabled',true);$jqElem.attr('checked',false);});$('#fileUploadArea').show();$('#loanOptionArea').hide();$('#pickupServiceArea').hide();$('#pickupService')[0].removeAttribute("required");$('#files')[0].removeAttribute("required");}else if(value==1){ACC.obcomplaints.doAnAllInputs("loanItems",function(elem){$jqElem=$(elem);$jqElem.attr('disabled',false);});$('#fileUploadArea').show();$('#loanOptionArea').hide();$('#pickupServiceArea').show();$('#pickupServiceContact').hide();$('#pickupServiceMail').hide();$('#files')[0].setAttribute("required","required");$('#pickupService')[0].setAttribute("required","required");}}
if(name=="pickupService"){var contactPerson=document.getElementById("pickupContactPersonName");var pickupDate=document.getElementById("pickupDate");var emailLabel=document.getElementById("pickupEmail");pickupDate.removeAttribute("required");contactPerson.removeAttribute("required");emailLabel.removeAttribute("required");if(value==3){$('#pickupServiceContact').show();$('#pickupServiceMail').hide();contactPerson.setAttribute("required","required");pickupDate.setAttribute("required","required");}else if(value==9){$('#pickupServiceContact').show();$('#pickupServiceMail').show();contactPerson.setAttribute("required","required");pickupDate.setAttribute("required","required");emailLabel.setAttribute("required","required");}else if(value==0){$('#pickupServiceContact').hide();$('#pickupServiceMail').hide();}}},toggleDisplayAreasInterface3:function($elem){var value=$elem.val();var name=$elem.attr('name');var contactPerson=document.getElementById("pickupContactPersonName");var pickupDate=document.getElementById("pickupDate");var emailLabel=document.getElementById("pickupEmail");if(name=="pickupService"){pickupDate.removeAttribute("required");contactPerson.removeAttribute("required");emailLabel.removeAttribute("required");if(value==3){$('#pickupServiceContact').show();$('#pickupServiceMail').hide();contactPerson.setAttribute("required","required");pickupDate.setAttribute("required","required");}else if(value==9){$('#pickupServiceContact').show();$('#pickupServiceMail').show();contactPerson.setAttribute("required","required");pickupDate.setAttribute("required","required");emailLabel.setAttribute("required","required");}else if(value==0){$('#pickupServiceContact').hide();$('#pickupServiceMail').hide();}}
if(name=="returnOption"){if(value=="2"){document.getElementById('deviceId').setAttribute("required","required");pickupDate.removeAttribute("required");contactPerson.removeAttribute("required");emailLabel.removeAttribute("required");}else{document.getElementById('deviceId').removeAttribute("required");}
if(value=="3"){$('#pickupServiceArea').hide();$("input[name='pickupService']")[0].removeAttribute("required");document.getElementById('files').setAttribute("required","required");}else{$('#pickupServiceArea').show();$("input[name='pickupService']")[0].setAttribute("required","required");document.getElementById('files').removeAttribute("required");}}},isOneChecked:function(inputNameAttr){var elements=document.getElementsByName(inputNameAttr);for(i=0;i<elements.length;i++){if(elements[i].checked){return true;}}
return false;},doAnAllInputs:function(inputNameAttr,functionToExecute){var elements=document.getElementsByName(inputNameAttr);for(i=0;i<elements.length;i++){functionToExecute(elements[i]);}},setupBoxTitle:function(){var boxTitle=document.getElementById("colorBoxTitle");if(boxTitle!==undefined){var colorBoxTitleSpan=document.getElementsByClassName("headline-text");for(i=0;i<colorBoxTitleSpan.length;i++){colorBoxTitleSpan[i].innerHTML=boxTitle.value;}}},showGeneralError:function(){ACC.obcomplaints.hideBusy();var errorBox=document.getElementsByClassName("complaints_popup_error_msg");var errorMsg=document.getElementById("generalErrorMsgBox");if(errorMsg!==undefined&&errorMsg!==null){if(errorBox!==undefined&&errorBox!==null){errorBox[0].innerHTML="<label>"+errorMsg.value+"</label>";}else{alert(errorMsg.value);}}}};(function(){ACC.obcomplaints.bindInitial();})();

ACC.secureportal={_autoload:["bindRegister","registerNavigationItem"],bindRegister:function(){if(!$(".js-secureportal-confirm-register-email").val()&&$(".js-secureportal-orignal-register-email").val()){$(".js-secureportal-register-button").attr("disabled","disabled");}
$(document).on("change",".js-secureportal-confirm-register-email, .js-secureportal-orignal-register-email",function(){var orginalEmail=$(".js-secureportal-orignal-register-email").val();var confirmationEmail=$(".js-secureportal-confirm-register-email").val();if(orginalEmail===confirmationEmail){$(".js-secureportal-email-not-match-message").hide();$(".js-secureportal-register-button").removeAttr("disabled");}else{$(".js-secureportal-email-not-match-message").show();$(".js-secureportal-register-button").attr("disabled","disabled");}});},registerNavigationItem:function(){var registerLink=$(".js-register-navigation-item").clone();$('.js-userAccount-Links').append(registerLink);registerLink.wrap("<li class='auto'></li>");}};
;
